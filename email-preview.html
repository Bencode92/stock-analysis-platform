<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradePulse - Prévisualisation Email</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        :root {
            --primary-color: #00ff9d;
            --bg-dark: #0a1621;
            --bg-medium: #15293c;
            --bg-light: #1e3a52;
            --text-light: #ffffff;
            --text-muted: #9ba1a8;
        }
        
        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--bg-light);
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
        
        .header h1 {
            color: var(--primary-color);
            margin: 0;
        }
        
        .preview-container {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 20px;
        }
        
        .controls {
            background-color: var(--bg-medium);
            border-radius: 8px;
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            background-color: var(--bg-dark);
            border: 1px solid var(--bg-light);
            border-radius: 4px;
            color: var(--text-light);
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background-color: var(--primary-color);
            color: var(--bg-dark);
            border: none;
            border-radius: 4px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background-color: #00cc7d;
        }
        
        .preview {
            background-color: var(--bg-medium);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .preview-tabs {
            display: flex;
            background-color: var(--bg-light);
        }
        
        .preview-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .preview-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .preview-content {
            padding: 20px;
            height: 600px;
            overflow: auto;
        }
        
        .preview-frame-container {
            height: 100%;
            overflow: hidden;
        }
        
        .preview-frame {
            width: 100%;
            height: 100%;
            border: none;
            transform-origin: top left;
        }
        
        .device-desktop {
            transform: scale(1);
            width: 100%;
        }
        
        .device-tablet {
            transform: scale(0.8);
            width: 768px;
        }
        
        .device-mobile {
            transform: scale(0.5);
            width: 375px;
        }
        
        .code-view {
            background-color: var(--bg-dark);
            padding: 15px;
            border-radius: 4px;
            height: 100%;
            overflow: auto;
            white-space: pre;
            font-family: monospace;
            color: var(--text-light);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: var(--primary-color);
            color: var(--bg-dark);
            border-radius: 4px;
            font-weight: bold;
            display: none;
            animation: fadeInOut 3s forwards;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { opacity: 0; }
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>PRÉVISUALISATION DES ALERTES EMAIL</h1>
            <div>
                <a href="actualites.html" class="btn-secondary">Retour au Dashboard</a>
            </div>
        </div>
        
        <div class="preview-container">
            <div class="controls">
                <div class="form-group">
                    <label>Type de résumé</label>
                    <select id="emailType">
                        <option value="daily">Résumé quotidien</option>
                        <option value="weekly">Résumé hebdomadaire</option>
                        <option value="alert">Alerte spéciale</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Portefeuille</label>
                    <select id="portfolioType">
                        <option value="aggressive">Agressif (+8.32%)</option>
                        <option value="moderate">Modéré (+5.47%)</option>
                        <option value="stable">Stable (+2.19%)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Email de test</label>
                    <input type="email" id="testEmail" placeholder="votre@email.com">
                </div>
                
                <button id="sendTestBtn" class="btn-primary">Envoyer un email de test</button>
                <button id="downloadBtn" class="btn-secondary" style="margin-top: 10px;">Télécharger le Template</button>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label>Préférences d'envoi</label>
                    <div>
                        <input type="checkbox" id="dailyEnabled" checked>
                        <label for="dailyEnabled">Résumé quotidien</label>
                    </div>
                    <div>
                        <input type="checkbox" id="weeklyEnabled" checked>
                        <label for="weeklyEnabled">Résumé hebdomadaire</label>
                    </div>
                    <div>
                        <input type="checkbox" id="alertsEnabled" checked>
                        <label for="alertsEnabled">Alertes spéciales</label>
                    </div>
                </div>
                
                <button id="savePrefsBtn" class="btn-primary" style="margin-top: 10px;">Enregistrer les préférences</button>
            </div>
            
            <div class="preview">
                <div class="preview-tabs">
                    <div class="preview-tab active" data-view="desktop">Desktop</div>
                    <div class="preview-tab" data-view="tablet">Tablette</div>
                    <div class="preview-tab" data-view="mobile">Mobile</div>
                    <div class="preview-tab" data-view="code">Code HTML</div>
                </div>
                
                <div class="preview-content">
                    <div class="preview-view desktop-view">
                        <div class="preview-frame-container">
                            <iframe id="previewFrame" class="preview-frame device-desktop" src="email-dashboard-template.html"></iframe>
                        </div>
                    </div>
                    
                    <div class="preview-view tablet-view hidden">
                        <div class="preview-frame-container">
                            <iframe id="tabletFrame" class="preview-frame device-tablet" src="email-dashboard-template.html"></iframe>
                        </div>
                    </div>
                    
                    <div class="preview-view mobile-view hidden">
                        <div class="preview-frame-container">
                            <iframe id="mobileFrame" class="preview-frame device-mobile" src="email-dashboard-template.html"></iframe>
                        </div>
                    </div>
                    
                    <div class="preview-view code-view hidden">
                        <pre id="codeView"></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification">Email de test envoyé avec succès !</div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Prévisualisation des onglets
            const tabs = document.querySelectorAll('.preview-tab');
            const views = document.querySelectorAll('.preview-view');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Onglets actifs
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Afficher la vue correspondante
                    const viewType = this.getAttribute('data-view');
                    views.forEach(view => view.classList.add('hidden'));
                    document.querySelector(`.${viewType}-view`).classList.remove('hidden');
                    
                    // Charger le code HTML pour l'onglet de code
                    if (viewType === 'code') {
                        fetch('email-dashboard-template.html')
                            .then(response => response.text())
                            .then(html => {
                                document.getElementById('codeView').textContent = html;
                            });
                    }
                });
            });
            
            // Gérer les emails de test
            document.getElementById('sendTestBtn').addEventListener('click', function() {
                const email = document.getElementById('testEmail').value;
                if (email) {
                    // Simuler l'envoi d'email (dans un vrai environnement, cela appellerait votre API)
                    setTimeout(() => {
                        const notification = document.getElementById('notification');
                        notification.style.display = 'block';
                        setTimeout(() => {
                            notification.style.display = 'none';
                        }, 3000);
                    }, 500);
                } else {
                    alert('Veuillez entrer une adresse email valide');
                }
            });
            
            // Gérer le téléchargement du template
            document.getElementById('downloadBtn').addEventListener('click', function() {
                fetch('email-dashboard-template.html')
                    .then(response => response.text())
                    .then(html => {
                        const blob = new Blob([html], { type: 'text/html' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = 'tradepulse-email-template.html';
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                    });
            });
            
            // Enregistrer les préférences
            document.getElementById('savePrefsBtn').addEventListener('click', function() {
                const prefs = {
                    daily: document.getElementById('dailyEnabled').checked,
                    weekly: document.getElementById('weeklyEnabled').checked,
                    alerts: document.getElementById('alertsEnabled').checked
                };
                
                // Simuler l'enregistrement des préférences
                localStorage.setItem('emailPrefs', JSON.stringify(prefs));
                
                const notification = document.getElementById('notification');
                notification.textContent = 'Préférences enregistrées !';
                notification.style.display = 'block';
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            });
            
            // Charger les préférences sauvegardées
            const savedPrefs = localStorage.getItem('emailPrefs');
            if (savedPrefs) {
                const prefs = JSON.parse(savedPrefs);
                document.getElementById('dailyEnabled').checked = prefs.daily;
                document.getElementById('weeklyEnabled').checked = prefs.weekly;
                document.getElementById('alertsEnabled').checked = prefs.alerts;
            }
        });
    </script>
</body>
</html>
