<!DOCTYPE html>
<html lang="fr" class="dark">
<!-- Extrait du fichier HTML - section des scripts uniquement -->

    <!-- Scripts -->
    <script src="js/simulation.js"></script>
    <script src="js/fiscal-optimizer.js"></script>
    <script src="js/budget-epargne.js"></script>
    <script src="js/loan-simulator.js"></script>
    <script src="js/loan-sensitivity.js"></script>
    <script src="js/ptz-simulator.js"></script>
    
    <!-- Script d'initialisation du simulateur PTZ -->
    <script>
        // Forcer l'initialisation du simulateur PTZ après le chargement complet
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser le simulateur PTZ avec un délai pour s'assurer que le DOM est prêt
            setTimeout(function() {
                // Initialisation simple
                if (typeof window.initPTZSimulator === 'function') {
                    window.initPTZSimulator();
                    console.log("Simulateur PTZ initialisé via script inline");
                }
                
                // Attacher directement un gestionnaire de clic au bouton Simuler PTZ
                const ptzButton = document.getElementById('calculate-ptz-button');
                if (ptzButton) {
                    ptzButton.onclick = function(e) {
                        e.preventDefault();
                        console.log("Clic sur bouton PTZ détecté");
                        
                        if (typeof window.simulerPTZ === 'function') {
                            window.simulerPTZ();
                            console.log("Fonction simulerPTZ exécutée");
                        } else {
                            console.error("La fonction simulerPTZ n'est pas disponible!");
                            alert("Erreur: La fonction de simulation n'est pas disponible. Rafraîchissez la page et réessayez.");
                        }
                        return false;
                    };
                    console.log("Gestionnaire de clic ajouté au bouton PTZ");
                }
            }, 500);
        });

        // S'assurer que le simulateur s'initialise aussi lors du clic sur son onglet
        document.querySelector('.simulation-tab[data-target="ptz-simulator"]')?.addEventListener('click', function() {
            setTimeout(function() {
                if (typeof window.initPTZSimulator === 'function') {
                    window.initPTZSimulator();
                    console.log("Simulateur PTZ réinitialisé suite au clic sur l'onglet");
                }
            }, 300);
        });
    </script>
</html>