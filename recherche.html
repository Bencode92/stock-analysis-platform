<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradePulse - Recherche Intelligente</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="pages-style.css">
    <link rel="stylesheet" href="search-style.css">
    <script type="module" src="aiintegration.js"></script>
    <style>
        /* Variables et reset */
        :root {
            --background-color: #011627; /* Bleu nuit */
            --background-gradient: linear-gradient(135deg, #010a14, #011627 70%);
            --text-color: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --accent-color: #00FF87; /* Vert néon */
            --accent-secondary: #0fe4ff; /* Cyan néon */
            --accent-tertiary: #ff36f0; /* Rose néon */
            --accent-glow: 0 0 15px rgba(0, 255, 135, 0.6);
            --cyan-glow: 0 0 15px rgba(15, 228, 255, 0.6);
            --pink-glow: 0 0 15px rgba(255, 54, 240, 0.6);
            --transition-time: 0.3s;
            --header-height: 70px;
            --sidebar-width: 80px;
            --card-bg: rgba(1, 30, 52, 0.5);
            --card-border: 1px solid rgba(0, 255, 135, 0.2);
            --dark-panel: rgba(1, 13, 25, 0.8);
            --card-radius: 12px;
            --card-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            --holographic-bg: linear-gradient(135deg, 
                rgba(15, 228, 255, 0.05) 10%, 
                rgba(0, 255, 135, 0.05) 40%, 
                rgba(255, 54, 240, 0.05) 70%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: var(--background-gradient);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
            font-size: 16px;
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(15, 228, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 30%, rgba(0, 255, 135, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 70%, rgba(255, 54, 240, 0.03) 0%, transparent 50%);
            z-index: -1;
        }
        
        /* Stylised mesh grid background */
        .grid-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(rgba(0, 255, 135, 0.03) 1px, transparent 1px),
                            linear-gradient(90deg, rgba(0, 255, 135, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            background-position: center center;
            z-index: -1;
            perspective: 1000px;
            transform-style: preserve-3d;
            transform: rotateX(60deg) scale(3) translateZ(-200px);
            opacity: 0.4;
        }
        
        /* Glowing orbs animation */
        @keyframes float {
            0% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-10px) translateX(10px); }
            50% { transform: translateY(0) translateX(20px); }
            75% { transform: translateY(10px) translateX(10px); }
            100% { transform: translateY(0) translateX(0); }
        }
        
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.2;
            z-index: -1;
        }
        
        .orb-1 {
            width: 300px;
            height: 300px;
            background-color: var(--accent-color);
            top: 20%;
            left: 10%;
            animation: float 15s infinite ease-in-out;
        }
        
        .orb-2 {
            width: 200px;
            height: 200px;
            background-color: var(--accent-secondary);
            bottom: 15%;
            right: 15%;
            animation: float 18s infinite ease-in-out reverse;
        }
        
        .orb-3 {
            width: 150px;
            height: 150px;
            background-color: var(--accent-tertiary);
            bottom: 30%;
            left: 20%;
            animation: float 20s infinite ease-in-out 5s;
        }
        
        /* Styles de base */
        a {
            color: var(--text-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        /* Header */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background-color: rgba(1, 13, 25, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            z-index: 100;
            border-bottom: 1px solid rgba(0, 255, 135, 0.2);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            font-weight: 900;
            font-size: 1.5rem;
            letter-spacing: 1px;
        }
        
        .pulse-dot {
            width: 12px;
            height: 12px;
            background-color: var(--accent-color);
            border-radius: 50%;
            margin-right: 10px;
            box-shadow: var(--accent-glow);
            animation: pulse 2s infinite;
        }
        
        .pulse-dot.large {
            width: 24px;
            height: 24px;
            margin-right: 0;
            margin-bottom: 20px;
        }
        
        .logo {
            background: linear-gradient(to right, var(--accent-color), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: var(--accent-glow);
        }
        
        .main-nav {
            display: flex;
            margin-left: 40px;
        }
        
        .main-nav a {
            margin-right: 30px;
            padding: 8px 5px;
            font-weight: 500;
            position: relative;
            transition: color 0.3s;
        }
        
        .main-nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(to right, var(--accent-color), var(--accent-secondary));
            transition: width 0.3s;
            box-shadow: var(--accent-glow);
        }
        
        .main-nav a:hover::after,
        .main-nav a.active::after {
            width: 100%;
        }
        
        .main-nav a.active {
            color: var(--accent-color);
        }
        
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .market-status {
            display: flex;
            align-items: center;
            margin-right: 30px;
            font-size: 0.875rem;
            background: rgba(1, 30, 52, 0.5);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(0, 255, 135, 0.2);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        }
        
        .market-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .market-indicator.green {
            background-color: #4CAF50;
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.6);
        }
        
        .market-time {
            margin-left: 10px;
            font-weight: 600;
            color: var(--accent-color);
        }

        /* Page Content Styles */
        .page-content {
            padding-top: var(--header-height);
            min-height: calc(100vh - var(--header-height));
            position: relative;
            z-index: 2;
        }
        
        /* Page Title Section */
        .page-title-section {
            text-align: center;
            padding: 50px 0 30px;
            position: relative;
        }
        
        .page-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 1px;
            background: linear-gradient(to right, var(--accent-color), var(--accent-secondary), var(--accent-tertiary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            display: inline-block;
        }
        
        .page-subtitle {
            font-size: 16px;
            font-weight: 500;
            color: var(--text-secondary);
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-top: 10px;
        }

        /* Main search container */
        .search-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .search-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .search-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: var(--dark-panel);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border: 1px solid rgba(0, 255, 135, 0.3);
        }
        
        .search-icon::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--accent-color), var(--accent-secondary), var(--accent-tertiary));
            z-index: -1;
            opacity: 0.7;
            filter: blur(8px);
            animation: rotateBorder 6s linear infinite;
        }
        
        @keyframes rotateBorder {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .search-icon i {
            font-size: 36px;
            color: var(--accent-color);
            text-shadow: var(--accent-glow);
        }
        
        .search-header h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-color);
        }
        
        .search-header p {
            font-size: 16px;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 20px;
        }
        
        /* Style pour le compteur de questions */
        .quota-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 25px auto 10px;
            padding: 10px 20px;
            background: var(--dark-panel);
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid rgba(0, 255, 135, 0.2);
            max-width: fit-content;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
        }
        
        .quota-counter i {
            color: var(--accent-color);
        }
        
        .quota-counter.low {
            border-color: rgba(255, 123, 0, 0.3);
        }
        
        .quota-counter.low i {
            color: #FF7B00;
        }
        
        .quota-counter.exhausted {
            border-color: rgba(255, 51, 51, 0.3);
        }
        
        .quota-counter.exhausted i {
            color: #FF3333;
        }
        
        .quota-reset-time {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        /* Badge Sonar */
        .sonar-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(to right, rgba(0, 255, 135, 0.15), rgba(15, 228, 255, 0.15));
            padding: 8px 15px;
            border-radius: 20px;
            margin-bottom: 15px;
            font-size: 12px;
            font-weight: 600;
            color: var(--accent-color);
            border: 1px solid rgba(0, 255, 135, 0.3);
            box-shadow: 0 0 15px rgba(0, 255, 135, 0.2);
        }
        
        .sonar-badge i {
            margin-right: 8px;
            animation: sonar-pulse 2s infinite;
        }
        
        @keyframes sonar-pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        /* Search form styles */
        .search-form {
            margin-bottom: 40px;
        }
        
        .input-wrapper {
            position: relative;
            margin-bottom: 20px;
        }
        
        #queryInput {
            width: 100%;
            padding: 20px 70px 20px 25px;
            border-radius: 30px;
            border: none;
            background: var(--dark-panel);
            color: var(--text-color);
            font-size: 18px;
            outline: none;
            transition: all 0.3s ease;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 255, 135, 0.2);
            backdrop-filter: blur(10px);
        }
        
        #queryInput:focus {
            border-color: var(--accent-color);
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.2), 0 5px 25px rgba(0, 0, 0, 0.2), 0 0 0 2px rgba(0, 255, 135, 0.1);
        }
        
        #queryInput::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        
        .search-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
            color: var(--background-color);
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--accent-glow);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .search-button:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 135, 0.8);
        }
        
        .search-button[disabled] {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(0, 255, 135, 0.3);
        }
        
        .search-examples {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }
        
        .search-examples p {
            font-size: 14px;
            color: var(--text-secondary);
            margin-right: 5px;
        }
        
        .example-button {
            padding: 10px 15px;
            background: var(--dark-panel);
            border: 1px solid rgba(0, 255, 135, 0.2);
            backdrop-filter: blur(5px);
            border-radius: 20px;
            color: var(--text-color);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .example-button:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 255, 135, 0.3);
        }
        
        .example-button[disabled] {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Results container */
        .results-container {
            background: var(--dark-panel);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 80px;
            position: relative;
            border: 1px solid rgba(0, 255, 135, 0.2);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .results-container::before {
            content: "";
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            background: linear-gradient(45deg, 
                rgba(0, 255, 135, 0.5), 
                rgba(15, 228, 255, 0.5),
                rgba(255, 54, 240, 0.5));
            border-radius: 20px;
            z-index: -1;
            opacity: 0.2;
            filter: blur(8px);
        }
        
        .initial-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 0;
            text-align: center;
        }
        
        .initial-state p {
            margin-top: 20px;
            font-size: 18px;
            color: var(--text-secondary);
        }
        
        .loading-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 0;
            text-align: center;
        }
        
        .loading-animation {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .loading-animation .pulse-dot {
            margin: 0 8px;
            animation: loadingPulse 1.5s infinite ease-in-out;
        }
        
        .loading-animation .pulse-dot:nth-child(2) {
            animation-delay: 0.2s;
            background-color: var(--accent-secondary);
            box-shadow: var(--cyan-glow);
        }
        
        .loading-animation .pulse-dot:nth-child(3) {
            animation-delay: 0.4s;
            background-color: var(--accent-tertiary);
            box-shadow: var(--pink-glow);
        }
        
        @keyframes loadingPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.7; }
        }
        
        .loading-state p {
            font-size: 18px;
            color: var(--text-secondary);
        }
        
        /* Results styling */
        .results {
            display: none;
        }
        
        .answer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .perplexity-badge {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 20px;
            background: linear-gradient(to right, rgba(0, 255, 135, 0.1), rgba(15, 228, 255, 0.1));
            border: 1px solid rgba(0, 255, 135, 0.2);
            font-size: 14px;
        }
        
        .perplexity-badge i {
            margin-right: 8px;
            color: var(--accent-color);
        }
        
        .timestamp {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .answer-content {
            margin-bottom: 40px;
            line-height: 1.7;
        }
        
        .answer-content p {
            margin-bottom: 16px;
        }
        
        .answer-content h3 {
            margin: 25px 0 15px;
            color: var(--accent-color);
            font-size: 18px;
        }
        
        .error-message {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px;
            text-align: center;
            color: #FF3333;
            background: rgba(255, 51, 51, 0.05);
            border-radius: 12px;
            margin: 20px 0;
        }
        
        .error-message i {
            font-size: 36px;
            margin-bottom: 15px;
        }
        
        .sources-section,
        .related-queries {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sources-section h3,
        .related-queries h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--accent-secondary);
        }
        
        .sources-list {
            list-style: none;
        }
        
        .sources-list li {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 14px;
        }
        
        .sources-list li:last-child {
            border-bottom: none;
        }
        
        .sources-list a {
            color: var(--accent-color);
            text-decoration: none;
            display: block;
            margin-bottom: 5px;
            transition: all 0.2s;
        }
        
        .sources-list a:hover {
            color: var(--accent-secondary);
            text-decoration: underline;
        }
        
        .source-details {
            display: block;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .related-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .related-query-button {
            padding: 8px 15px;
            background: var(--holographic-bg);
            border: 1px solid rgba(0, 255, 135, 0.2);
            border-radius: 20px;
            color: var(--text-color);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .related-query-button:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Footer */
        .page-footer {
            background: var(--dark-panel);
            padding: 20px 40px;
            text-align: center;
            position: relative;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0, 255, 135, 0.2);
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .data-source-info {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .data-source-info p {
            font-size: 14px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
        }
        
        .data-source-info i {
            margin-right: 8px;
            color: var(--accent-color);
        }
        
        .update-time {
            color: var(--accent-color);
            font-weight: 500;
        }
        
        /* Digital circuit lines */
        .circuit-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.15;
        }
        
        .circuit-line {
            position: absolute;
            background: var(--accent-color);
            box-shadow: var(--accent-glow);
        }
        
        .circuit-dot {
            position: absolute;
            background: var(--accent-color);
            border-radius: 50%;
            box-shadow: var(--accent-glow);
        }
        
        .pulse-along-path {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent-color);
            box-shadow: var(--accent-glow);
            animation: pulseAlongPath 3s infinite linear;
            opacity: 0.7;
        }
        
        @keyframes pulseAlongPath {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }
        
        /* Animations */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 255, 135, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 255, 135, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 255, 135, 0); }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Holographic effect for text */
        .holographic {
            background: linear-gradient(90deg, 
                var(--accent-color) 0%, 
                var(--accent-secondary) 35%, 
                var(--accent-tertiary) 70%, 
                var(--accent-color) 100%);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: holographic 6s linear infinite;
        }
        
        @keyframes holographic {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .main-header {
                padding: 0 20px;
            }
            
            .page-title {
                font-size: 28px;
            }
            
            .main-nav {
                display: none;
            }
            
            .data-source-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .search-examples {
                flex-direction: column;
                align-items: stretch;
            }
            
            .results-container {
                padding: 30px 20px;
            }
            
            .answer-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .timestamp {
                margin-left: 0;
            }
        }
    </style>
</head>
<body class="page-recherche fade-in">
    <!-- Éléments d'arrière-plan -->
    <div class="grid-background"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
    
    <!-- Éléments circuit -->
    <div class="circuit-lines" id="circuitAnimation"></div>
    
    <header class="main-header">
        <div class="header-left">
            <div class="logo-container">
                <div class="pulse-dot"></div>
                <a href="index.html" class="logo">TRADEPULSE</a>
            </div>
            <nav class="main-nav">
                <a href="actualites.html">Actualités</a>
                <a href="portefeuille.html?type=modere">Portefeuilles</a>
                <a href="recherche.html" class="active">Recherche IA</a>
            </nav>
        </div>
        <div class="header-right">
            <div class="market-status">
                <div class="market-indicator green"></div>
                <span>Marché ouvert</span>
                <span class="market-time" id="marketTime">16:24:35</span>
            </div>
        </div>
    </header>

    <main class="page-content search-content">
        <section class="page-title-section">
            <h1 class="page-title">RECHERCHE FINANCIÈRE IA</h1>
            <p class="page-subtitle">PROPULSÉE PAR PERPLEXITY AI</p>
        </section>

        <div class="search-container">
            <div class="search-header">
                <div class="search-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="sonar-badge">
                    <i class="fas fa-broadcast-tower"></i> SONAR ACTIVÉ
                </div>
                <h2 class="holographic">Posez une question sur les marchés, les actifs ou les stratégies d'investissement</h2>
                <p>Notre intelligence artificielle analysera les dernières informations et vous fournira une réponse détaillée avec des sources fiables.</p>
                
                <!-- Compteur de questions -->
                <div id="quotaCounter" class="quota-counter">
                    <i class="fas fa-comment-dots"></i>
                    <span>Questions restantes aujourd'hui: <strong id="questionsRemaining">3</strong></span>
                </div>
            </div>
            
            <div class="search-form">
                <form id="queryForm">
                    <div class="input-wrapper">
                        <input type="text" id="queryInput" placeholder="Ex: Quelles sont les implications de la hausse des taux directeurs sur le marché obligataire?" required>
                        <button type="submit" class="search-button">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="search-examples">
                        <p>Suggestions :</p>
                        <button type="button" class="example-button" data-query="Quels sont les secteurs les plus performants cette semaine et pourquoi?">Secteurs performants</button>
                        <button type="button" class="example-button" data-query="Comment la situation géopolitique actuelle affecte-t-elle les marchés du pétrole?">Géopolitique & Pétrole</button>
                        <button type="button" class="example-button" data-query="Quelles sont les meilleures stratégies d'investissement face à l'inflation actuelle?">Stratégies anti-inflation</button>
                    </div>
                </form>
            </div>
            
            <div class="results-container" id="resultsContainer">
                <!-- État initial (vide) -->
                <div class="initial-state">
                    <div class="pulse-dot large"></div>
                    <p>Votre assistant financier personnel attend votre question</p>
                </div>
                
                <!-- État de chargement (masqué initialement) -->
                <div class="loading-state" style="display: none;">
                    <div class="loading-animation">
                        <div class="pulse-dot"></div>
                        <div class="pulse-dot"></div>
                        <div class="pulse-dot"></div>
                    </div>
                    <p>Analyse des marchés en cours avec Sonar...</p>
                </div>
                
                <!-- Résultats (masqués initialement) -->
                <div class="results" style="display: none;">
                    <div class="answer-header">
                        <div class="perplexity-badge">
                            <i class="fas fa-robot"></i>
                            <span>Propulsé par Perplexity Sonar</span>
                        </div>
                        <div class="timestamp" id="answerTimestamp">07/03/2025 • 10:15</div>
                    </div>
                    
                    <div class="answer-content" id="answerContent">
                        <!-- Le contenu sera inséré ici dynamiquement -->
                    </div>
                    
                    <div class="sources-section">
                        <h3>Sources et références</h3>
                        <ul class="sources-list" id="sourcesList">
                            <!-- Les sources seront insérées ici dynamiquement -->
                        </ul>
                    </div>
                    
                    <div class="related-queries">
                        <h3>Questions associées</h3>
                        <div class="related-buttons" id="relatedButtons">
                            <!-- Les questions associées seront insérées ici dynamiquement -->
                        </div>
                    </div>
                </div>

                <!-- État de débogage (masqué) -->
                <div id="debugInfo" style="display: none; margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.5); border-radius: 8px;">
                    <h3 style="color: #00ff99;">Informations de débogage</h3>
                    <pre id="debugContent" style="color: #ffffff; overflow-x: auto; white-space: pre-wrap;"></pre>
                </div>
            </div>
        </div>
    </main>

    <footer class="page-footer">
        <div class="data-source-info">
            <p><i class="fas fa-info-circle"></i> Les données de marché sont extraites en temps réel</p>
            <p><i class="fas fa-robot"></i> Analyses sectorielles et recherche intelligente fournies par Perplexity Sonar</p>
            <p><i class="fas fa-clock"></i> Dernière mise à jour: <span class="update-time" id="updateTime">09/03/2025 10:15:53</span></p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mode debug (désactivé pour la production)
            const DEBUG_MODE = false;
            
            // Configuration du quota de questions
            const QUESTIONS_QUOTA = {
                max: 3,                // Maximum de questions par période
                period: 60 * 60 * 1000, // Période de quota (1 heure en millisecondes)
                storageKey: 'tradepulse_questions_quota'
            };
            
            // Variables pour le suivi des questions
            let questionsQuota = getQuestionsQuota();
            
            // Update market time
            updateMarketTime();
            setInterval(updateMarketTime, 1000);
            
            // Update current date
            updateCurrentDate();
            
            // Mettre à jour l'affichage du quota
            updateQuotaDisplay();
            
            // Créer l'animation des circuits
            createCircuitAnimation();
            
            // Vérifier si Sonar est activé
            checkSonarEnabled();
            
            // Afficher la section de débogage si nécessaire
            if (DEBUG_MODE) {
                document.getElementById('debugInfo').style.display = 'block';
            }
            
            // Handle example buttons
            document.querySelectorAll('.example-button').forEach(button => {
                button.addEventListener('click', function() {
                    if (questionsQuota.remaining <= 0) {
                        alert('Vous avez atteint votre limite de questions pour l\'heure en cours. Veuillez réessayer plus tard.');
                        return;
                    }
                    
                    const query = this.getAttribute('data-query');
                    document.getElementById('queryInput').value = query;
                    document.getElementById('queryForm').dispatchEvent(new Event('submit'));
                });
            });
            
            // Handle form submission
            document.getElementById('queryForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const query = document.getElementById('queryInput').value.trim();
                
                // Vérifier si le quota est épuisé
                if (questionsQuota.remaining <= 0) {
                    alert('Vous avez atteint votre limite de questions pour l\'heure en cours. Veuillez réessayer plus tard.');
                    return;
                }
                
                if (query) {
                    // Décrémenter le quota
                    questionsQuota.remaining--;
                    questionsQuota.questions.push({
                        timestamp: Date.now(),
                        query: query
                    });
                    saveQuestionsQuota(questionsQuota);
                    updateQuotaDisplay();
                    
                    // Show loading state
                    document.querySelector('.initial-state').style.display = 'none';
                    document.querySelector('.loading-state').style.display = 'flex';
                    document.querySelector('.results').style.display = 'none';
                    
                    if (DEBUG_MODE) {
                        logDebug(`Recherche lancée: "${query}"`);
                    }
                    
                    // Appel à l'API Perplexity via l'instance globale
                    if (window.perplexityIntegration) {
                        logDebug('Utilisation de l\'instance perplexityIntegration');
                        
                        try {
                            window.perplexityIntegration.search(query)
                                .then(data => {
                                    logDebug('Réponse reçue de l\'API:');
                                    logDebug(JSON.stringify(data, null, 2));
                                    
                                    // Mettre à jour l'interface avec les résultats
                                    updateResultsUI(data);
                                    
                                    // Masquer le chargement et afficher les résultats
                                    document.querySelector('.loading-state').style.display = 'none';
                                    document.querySelector('.results').style.display = 'block';
                                })
                                .catch(error => {
                                    console.error('Erreur lors de la recherche:', error);
                                    logDebug(`Erreur lors de la recherche: ${error.message}`);
                                    handleSearchError();
                                });
                        } catch (error) {
                            console.error('Erreur lors de la recherche:', error);
                            logDebug(`Exception lors de la recherche: ${error.message}`);
                            handleSearchError();
                        }
                    } else {
                        // Fallback si l'intégration n'est pas disponible
                        logDebug('⚠️ L\'intégration Perplexity n\'est pas disponible, utilisation des données simulées');
                        setTimeout(() => {
                            const simulatedData = simulatePerplexityResponse(query);
                            logDebug('Données simulées générées:');
                            logDebug(JSON.stringify(simulatedData, null, 2));
                            
                            updateResultsUI(simulatedData);
                            document.querySelector('.loading-state').style.display = 'none';
                            document.querySelector('.results').style.display = 'block';
                        }, 1500);
                    }
                }
            });
            
            // Fonction pour vérifier si Sonar est activé
            function checkSonarEnabled() {
                // Vérifier si Sonar est activé via l'API
                if (window.perplexityIntegration && window.perplexityIntegration.API_CONFIG && window.perplexityIntegration.API_CONFIG.useSonar) {
                    // Sonar est activé, afficher le badge
                    document.querySelector('.sonar-badge').style.display = 'inline-flex';
                    
                    // Mettre à jour le badge Perplexity pour indiquer l'utilisation de Sonar
                    const perplexityBadge = document.querySelector('.perplexity-badge');
                    perplexityBadge.innerHTML = '<i class="fas fa-robot"></i><span>Propulsé par Perplexity Sonar</span>';
                    perplexityBadge.style.background = 'linear-gradient(to right, rgba(0, 255, 135, 0.2), rgba(15, 228, 255, 0.2))';
                    
                    // Mettre à jour le texte de chargement
                    document.querySelector('.loading-state p').textContent = 'Analyse des marchés en cours avec Sonar...';
                } else {
                    // Sonar n'est pas activé, masquer le badge
                    document.querySelector('.sonar-badge').style.display = 'none';
                    
                    // Mettre à jour le badge Perplexity pour indiquer l'utilisation standard
                    const perplexityBadge = document.querySelector('.perplexity-badge');
                    perplexityBadge.innerHTML = '<i class="fas fa-robot"></i><span>Propulsé par Perplexity AI</span>';
                    
                    // Mettre à jour le texte de chargement
                    document.querySelector('.loading-state p').textContent = 'Analyse des marchés en cours...';
                }
            }
            
            // Fonction pour récupérer le quota de questions
            function getQuestionsQuota() {
                // Récupérer le quota enregistré
                const savedQuota = localStorage.getItem(QUESTIONS_QUOTA.storageKey);
                let quota;
                
                if (savedQuota) {
                    quota = JSON.parse(savedQuota);
                    
                    // Nettoyer les anciennes questions (plus d'une heure)
                    const now = Date.now();
                    quota.questions = quota.questions.filter(q => 
                        now - q.timestamp < QUESTIONS_QUOTA.period
                    );
                    
                    // Mettre à jour le nombre de questions restantes
                    quota.remaining = QUESTIONS_QUOTA.max - quota.questions.length;
                    quota.resetTime = quota.questions.length > 0 ? 
                        Math.min(...quota.questions.map(q => q.timestamp)) + QUESTIONS_QUOTA.period : 
                        null;
                } else {
                    quota = {
                        remaining: QUESTIONS_QUOTA.max,
                        questions: [],
                        resetTime: null
                    };
                }
                
                return quota;
            }
            
            // Fonction pour enregistrer le quota de questions
            function saveQuestionsQuota(quota) {
                localStorage.setItem(QUESTIONS_QUOTA.storageKey, JSON.stringify(quota));
            }
            
            // Fonction pour mettre à jour l'affichage du quota
            function updateQuotaDisplay() {
                const counterElement = document.getElementById('quotaCounter');
                const remainingElement = document.getElementById('questionsRemaining');
                
                // Mettre à jour le nombre de questions restantes
                remainingElement.textContent = questionsQuota.remaining;
                
                // Mettre à jour la classe du compteur en fonction du nombre de questions restantes
                counterElement.classList.remove('low', 'exhausted');
                if (questionsQuota.remaining === 0) {
                    counterElement.classList.add('exhausted');
                } else if (questionsQuota.remaining === 1) {
                    counterElement.classList.add('low');
                }
                
                // Afficher le temps de réinitialisation si nécessaire
                if (questionsQuota.resetTime && questionsQuota.remaining < QUESTIONS_QUOTA.max) {
                    // Vérifier s'il existe déjà un élément de temps de réinitialisation
                    let resetTimeElement = document.querySelector('.quota-reset-time');
                    if (!resetTimeElement) {
                        resetTimeElement = document.createElement('div');
                        resetTimeElement.className = 'quota-reset-time';
                        counterElement.appendChild(resetTimeElement);
                    }
                    
                    // Calculer le temps restant
                    const now = Date.now();
                    const oldestQueryTime = Math.min(...questionsQuota.questions.map(q => q.timestamp));
                    const resetTime = oldestQueryTime + QUESTIONS_QUOTA.period;
                    const timeRemaining = resetTime - now;
                    
                    if (timeRemaining > 0) {
                        const minutes = Math.floor(timeRemaining / 60000);
                        const seconds = Math.floor((timeRemaining % 60000) / 1000);
                        resetTimeElement.textContent = `Renouvellement dans ${minutes}m ${seconds}s`;
                        
                        // Mettre à jour le temps restant toutes les secondes
                        setTimeout(updateQuotaDisplay, 1000);
                    } else {
                        // Actualiser le quota si le temps est écoulé
                        questionsQuota = getQuestionsQuota();
                        saveQuestionsQuota(questionsQuota);
                        resetTimeElement.remove();
                    }
                }
                
                // Désactiver les boutons si le quota est épuisé
                const searchButton = document.querySelector('.search-button');
                const exampleButtons = document.querySelectorAll('.example-button');
                
                if (questionsQuota.remaining <= 0) {
                    searchButton.setAttribute('disabled', 'disabled');
                    exampleButtons.forEach(button => {
                        button.setAttribute('disabled', 'disabled');
                    });
                } else {
                    searchButton.removeAttribute('disabled');
                    exampleButtons.forEach(button => {
                        button.removeAttribute('disabled');
                    });
                }
            }
            
            // Fonction pour le débogage
            function logDebug(message) {
                if (DEBUG_MODE) {
                    const debugContent = document.getElementById('debugContent');
                    const timestamp = new Date().toLocaleTimeString();
                    debugContent.innerHTML += `[${timestamp}] ${message}\n\n`;
                    
                    // Auto-scroll vers le bas
                    debugContent.scrollTop = debugContent.scrollHeight;
                }
                console.log(message);
            }
            
            // Créer l'animation des circuits
            function createCircuitAnimation() {
                const circuitContainer = document.getElementById('circuitAnimation');
                const containerWidth = window.innerWidth;
                const containerHeight = document.documentElement.scrollHeight;
                
                // Définir les positions des nœuds pour les circuits
                const nodes = [
                    { x: containerWidth * 0.1, y: containerHeight * 0.2 },
                    { x: containerWidth * 0.4, y: containerHeight * 0.15 },
                    { x: containerWidth * 0.7, y: containerHeight * 0.25 },
                    { x: containerWidth * 0.9, y: containerHeight * 0.3 },
                    { x: containerWidth * 0.8, y: containerHeight * 0.5 },
                    { x: containerWidth * 0.5, y: containerHeight * 0.6 },
                    { x: containerWidth * 0.2, y: containerHeight * 0.7 },
                    { x: containerWidth * 0.3, y: containerHeight * 0.4 }
                ];
                
                // Créer les lignes entre les nœuds
                const connections = [
                    [0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 6], [6, 7], [7, 0],
                    [0, 5], [1, 7], [2, 4], [3, 5]
                ];
                
                // Créer les nœuds (points)
                nodes.forEach((node, index) => {
                    const dot = document.createElement('div');
                    dot.className = 'circuit-dot';
                    dot.style.width = '6px';
                    dot.style.height = '6px';
                    dot.style.left = node.x + 'px';
                    dot.style.top = node.y + 'px';
                    circuitContainer.appendChild(dot);
                });
                
                // Créer les lignes
                connections.forEach(([fromIndex, toIndex]) => {
                    const from = nodes[fromIndex];
                    const to = nodes[toIndex];
                    
                    const line = document.createElement('div');
                    line.className = 'circuit-line';
                    
                    // Calculer la longueur et l'angle de la ligne
                    const dx = to.x - from.x;
                    const dy = to.y - from.y;
                    const length = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    // Positionner et faire pivoter la ligne
                    line.style.width = length + 'px';
                    line.style.height = '1px';
                    line.style.left = from.x + 'px';
                    line.style.top = from.y + 'px';
                    line.style.transformOrigin = '0 0';
                    line.style.transform = `rotate(${angle}deg)`;
                    
                    circuitContainer.appendChild(line);
                    
                    // Ajouter une pulsation se déplaçant le long de la ligne
                    if (Math.random() > 0.5) { // Seulement sur certaines lignes
                        const pulse = document.createElement('div');
                        pulse.className = 'pulse-along-path';
                        pulse.style.left = from.x + 'px';
                        pulse.style.top = from.y + 'px';
                        
                        // Animation de déplacement le long de la ligne
                        const keyframes = `
                            @keyframes movePulse${fromIndex}${toIndex} {
                                0% { transform: translate(0, 0) scale(0.8); }
                                100% { transform: translate(${dx}px, ${dy}px) scale(0.8); }
                            }
                        `;
                        
                        const style = document.createElement('style');
                        style.innerHTML = keyframes;
                        document.head.appendChild(style);
                        
                        pulse.style.animation = `movePulse${fromIndex}${toIndex} ${Math.random() * 3 + 3}s linear infinite`;
                        
                        circuitContainer.appendChild(pulse);
                    }
                });
            }
        });
        
        // Gestion des erreurs de recherche
        function handleSearchError() {
            document.querySelector('.loading-state').style.display = 'none';
            document.getElementById('answerContent').innerHTML = 
                `<div class="error-message">
                    <i class="fas fa-exclamation-circle"></i>
                    <p>Une erreur s'est produite lors de la recherche. Veuillez réessayer.</p>
                 </div>`;
            document.querySelector('.results').style.display = 'block';
        }
        
        // Fonction pour mettre à jour l'interface avec les résultats
        function updateResultsUI(data) {
            // Mettre à jour le contenu de la réponse
            document.getElementById('answerContent').innerHTML = data.answer;
            
            // Mettre à jour l'horodatage
            const now = new Date();
            const dateStr = now.toLocaleDateString('fr-FR');
            const timeStr = now.toLocaleTimeString('fr-FR', {
                hour: '2-digit',
                minute: '2-digit'
            });
            document.getElementById('answerTimestamp').textContent = `${dateStr} • ${timeStr}`;
            
            // Mettre à jour les sources
            const sourcesList = document.getElementById('sourcesList');
            sourcesList.innerHTML = '';
            data.sources.forEach(source => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="${source.url}" target="_blank">${source.title}</a>
                                <span class="source-details">${source.publisher} • ${source.date}</span>`;
                sourcesList.appendChild(li);
            });
            
            // Mettre à jour les questions associées
            const relatedButtons = document.getElementById('relatedButtons');
            relatedButtons.innerHTML = '';
            data.relatedQueries.forEach(query => {
                const button = document.createElement('button');
                button.className = 'related-query-button';
                button.textContent = query;
                button.addEventListener('click', function() {
                    // Vérifier le quota avant de poser une question associée
                    const quotaData = JSON.parse(localStorage.getItem('tradepulse_questions_quota') || '{"remaining":3,"questions":[]}');
                    if (quotaData.remaining <= 0) {
                        alert('Vous avez atteint votre limite de questions pour l\'heure en cours. Veuillez réessayer plus tard.');
                        return;
                    }
                    
                    document.getElementById('queryInput').value = query;
                    document.getElementById('queryForm').dispatchEvent(new Event('submit'));
                });
                relatedButtons.appendChild(button);
            });
            
            // Mettre à jour le badge Perplexity en fonction de Sonar
            const perplexityBadge = document.querySelector('.perplexity-badge');
            if (window.perplexityIntegration && window.perplexityIntegration.API_CONFIG && window.perplexityIntegration.API_CONFIG.useSonar) {
                perplexityBadge.innerHTML = '<i class="fas fa-robot"></i><span>Propulsé par Perplexity Sonar</span>';
                perplexityBadge.style.background = 'linear-gradient(to right, rgba(0, 255, 135, 0.2), rgba(15, 228, 255, 0.2))';
            } else {
                perplexityBadge.innerHTML = '<i class="fas fa-robot"></i><span>Propulsé par Perplexity AI</span>';
                perplexityBadge.style.background = 'linear-gradient(to right, rgba(0, 255, 135, 0.1), rgba(15, 228, 255, 0.1))';
            }
        }
        
        // Fonction de simulation de réponse Perplexity (comme fallback)
        function simulatePerplexityResponse(query) {
            // Normaliser la requête pour la correspondance
            const normalizedQuery = query.toLowerCase();
            
            // Réponses prédéfinies basées sur des mots-clés dans la requête
            if (normalizedQuery.includes('secteur') && normalizedQuery.includes('performant')) {
                return {
                    answer: `<p>Cette semaine, les secteurs les plus performants ont été la technologie et l'énergie, avec des gains respectifs de 3,2% et 2,8%.</p>
                            <p>Le secteur technologique a été principalement porté par les géants de l'IA comme NVIDIA (+5,7%) et Microsoft (+3,1%), suite à plusieurs annonces de nouveaux produits et partenariats stratégiques. En particulier, l'annonce de Microsoft concernant l'intégration de nouvelles capacités d'IA dans sa suite Office a été très bien accueillie par les marchés.</p>
                            <p>Quant au secteur de l'énergie, il a bénéficié d'une hausse des prix du pétrole résultant des tensions géopolitiques au Moyen-Orient et de la décision de l'OPEP+ de maintenir sa réduction de production. ExxonMobil et Chevron ont tous deux enregistré des gains de plus de 3%.</p>
                            <p>En revanche, le secteur des services publics est resté à la traîne, pénalisé par les préoccupations concernant la hausse des taux d'intérêt.</p>`,
                    sources: [
                        { title: "Tech Sector Outperforms as AI Boom Continues", url: "#", publisher: "Financial Times", date: "06/03/2025" },
                        { title: "Energy Stocks Rally on OPEC+ Production Cuts", url: "#", publisher: "Bloomberg", date: "05/03/2025" },
                        { title: "Weekly Market Sector Performance Report", url: "#", publisher: "S&P Global", date: "07/03/2025" }
                    ],
                    relatedQueries: [
                        "Quelles actions tech ont le plus contribué à la performance du secteur?",
                        "Comment investir dans le secteur de l'énergie actuellement?",
                        "Quel impact a l'IA sur les marchés financiers?"
                    ]
                };
            } else if (normalizedQuery.includes('géopolitique') && normalizedQuery.includes('pétrole')) {
                return {
                    answer: `<p>La situation géopolitique actuelle a un impact significatif sur les marchés pétroliers, provoquant une augmentation de la volatilité et une tendance haussière des prix.</p>
                            <p>Les tensions au Moyen-Orient, en particulier les récentes escalades dans le détroit d'Ormuz, ont créé des incertitudes concernant l'approvisionnement mondial. Environ 20% du pétrole mondial transite par ce passage stratégique, et toute perturbation pourrait entraîner des conséquences majeures sur l'offre globale.</p>
                            <p>En conséquence, le prix du Brent a augmenté de 8% au cours des deux dernières semaines, atteignant 86$ le baril. Cette hausse se répercute déjà sur les prix à la pompe dans plusieurs pays, avec une augmentation moyenne de 3,5% constatée en Europe.</p>
                            <p>Par ailleurs, les sanctions occidentales contre certains pays producteurs continuent de restreindre l'offre sur le marché international, contribuant à maintenir une pression à la hausse sur les prix.</p>`,
                    sources: [
                        { title: "Oil Prices Surge as Middle East Tensions Escalate", url: "#", publisher: "Reuters", date: "04/03/2025" },
                        { title: "Impact of Geopolitical Risks on Energy Markets", url: "#", publisher: "IEA Report", date: "02/03/2025" },
                        { title: "Global Oil Supply: Vulnerabilities and Chokepoints", url: "#", publisher: "Energy Economics", date: "01/03/2025" }
                    ],
                    relatedQueries: [
                        "Comment les cours du pétrole affectent-ils l'inflation?",
                        "Quelles compagnies pétrolières sont les mieux positionnées actuellement?",
                        "Quelle est la stratégie de l'OPEP face aux tensions géopolitiques?"
                    ]
                };
            } else if (normalizedQuery.includes('inflation') && normalizedQuery.includes('stratégie')) {
                return {
                    answer: `<p>Face à l'inflation actuelle de 3,7% en zone euro et 4,1% aux États-Unis, plusieurs stratégies d'investissement s'avèrent particulièrement pertinentes :</p>
                            <h3>1. Actifs réels et matières premières</h3>
                            <p>Les investissements dans l'immobilier, les infrastructures et les matières premières comme l'or ont historiquement bien performé en période d'inflation. Ces actifs tangibles voient généralement leur valeur augmenter avec l'inflation.</p>
                            <h3>2. Actions de valeur avec pricing power</h3>
                            <p>Les entreprises capables de répercuter les hausses de coûts sur leurs clients sans perdre en volume de ventes (pricing power) résistent mieux à l'inflation. On les trouve souvent dans les secteurs des biens de consommation de base, de la santé et de certaines technologies.</p>
                            <h3>3. Obligations indexées sur l'inflation</h3>
                            <p>Les TIPS (Treasury Inflation-Protected Securities) aux États-Unis ou les OATi en France offrent une protection explicite contre l'inflation, leur principal et leurs intérêts étant ajustés en fonction de l'évolution des prix.</p>
                            <h3>4. Duration courte pour les obligations classiques</h3>
                            <p>Dans un environnement inflationniste, privilégier les obligations à duration courte permet de limiter la sensibilité de votre portefeuille à la hausse des taux d'intérêt qui accompagne généralement l'inflation.</p>`,
                    sources: [
                        { title: "Investing Strategies for Inflationary Environments", url: "#", publisher: "Morgan Stanley Research", date: "01/03/2025" },
                        { title: "How to Protect Your Portfolio Against Inflation", url: "#", publisher: "Journal of Portfolio Management", date: "15/02/2025" },
                        { title: "Central Banks' Response to Persistent Inflation", url: "#", publisher: "ECB Economic Bulletin", date: "28/02/2025" }
                    ],
                    relatedQueries: [
                        "Quels ETF permettent de se protéger contre l'inflation?",
                        "Comment l'or performe-t-il en période d'inflation élevée?",
                        "Quelle allocation d'actifs recommandée face à l'inflation?"
                    ]
                };
            } else {
                // Réponse générique pour toute autre requête
                return {
                    answer: `<p>Votre question sur "${query}" touche à un sujet important dans le contexte économique actuel.</p>
                            <p>D'après les analyses récentes et les données de marché, plusieurs facteurs entrent en jeu. Les tendances observées sur les marchés financiers ces dernières semaines montrent une volatilité accrue, notamment dans les secteurs technologiques et énergétiques.</p>
                            <p>Les experts financiers recommandent actuellement de diversifier les portefeuilles et de porter une attention particulière aux indicateurs macroéconomiques comme l'inflation et les décisions des banques centrales.</p>
                            <p>Pour une stratégie plus adaptée à ce sujet spécifique, il serait judicieux de consulter les rapports sectoriels détaillés et de suivre les annonces des principales institutions financières dans les prochains jours.</p>`,
                    sources: [
                        { title: "Market Analysis Report - Q1 2025", url: "#", publisher: "Financial Times", date: "01/03/2025" },
                        { title: "Global Economic Outlook 2025", url: "#", publisher: "World Economic Forum", date: "15/02/2025" },
                        { title: "Investment Strategies for Volatile Markets", url: "#", publisher: "Wall Street Journal", date: "05/03/2025" }
                    ],
                    relatedQueries: [
                        "Quelles sont les perspectives économiques pour 2025?",
                        "Comment diversifier un portefeuille d'investissement?",
                        "Quel impact ont les décisions des banques centrales sur les marchés?"
                    ]
                };
            }
        }
        
        // Update market time
        function updateMarketTime() {
            const marketTimeElement = document.getElementById('marketTime');
            if (marketTimeElement) {
                const now = new Date();
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const seconds = now.getSeconds().toString().padStart(2, '0');
                marketTimeElement.textContent = `${hours}:${minutes}:${seconds}`;
            }
        }
        
        // Update current date
        function updateCurrentDate() {
            const updateTimeElement = document.getElementById('updateTime');
            if (updateTimeElement) {
                const now = new Date();
                const dateStr = now.toLocaleDateString('fr-FR');
                const timeStr = now.toLocaleTimeString('fr-FR', {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                updateTimeElement.textContent = `${dateStr} ${timeStr}`;
            }
        }
    </script>
</body>
</html>