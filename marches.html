<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradePulse - Marchés</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        green: {
                            400: '#22c55e'
                        }
                    },
                    maxWidth: {
                        '8xl': '1200px',
                        '9xl': '1440px',
                        '10xl': '1600px'
                    }
                },
                fontFamily: {
                    sans: ['Inter', 'sans-serif']
                }
            }
        }
    </script>
    <style>
        :root {
            --background-color: #0a1929;
            --light-background-color: #f0f5ff;
            --text-color: #FFFFFF;
            --light-text-color: #1a202c;
            /* Vert plus doux (moins néon) */
            --accent-color: #22c55e;
            --accent-subtle: rgba(34, 197, 94, 0.08);
            --accent-medium: rgba(34, 197, 94, 0.18);
            --accent-strong: rgba(34, 197, 94, 0.3);
            --card-bg: rgba(10, 30, 50, 0.4);
            --card-header: linear-gradient(180deg, rgba(15, 40, 65, 0.9) 0%, rgba(10, 25, 45, 0.95) 100%);
            --card-border: rgba(34, 197, 94, 0.12);
            --accent-glow: 0 0 10px rgba(34, 197, 94, 0.1);
            --accent-glow-strong: 0 0 15px rgba(34, 197, 94, 0.2);
            --transition-time: 0.3s;
            --header-height: 70px;
            --sidebar-width: 80px;
            /* Rouge moins saturé */
            --negative-color: #ef4444;
            --neutral-color: #999999;
            --separator-color: rgba(255, 255, 255, 0.04);
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
            overflow-x: hidden;
            letter-spacing: 0.01em;
            line-height: 1.75;
        }
        
        body.dark {
            background-color: var(--background-color);
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(34, 197, 94, 0.04) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(0, 100, 255, 0.02) 0%, transparent 20%);
            color: var(--text-color);
        }
        
        body.light {
            background-color: var(--light-background-color);
            color: var(--light-text-color);
        }
        
        /* Densité confortable (par défaut) */
        .data-table td { padding: 20px 18px; }
        .card-body { padding: 18px; }
        .market-index-col { padding: 18px 20px; }
        .market-overview-grid { gap: 20px; }
        
        /* Densité compacte */
        body.density-compact .data-table td { padding: 12px 14px; }
        body.density-compact .card-body { padding: 12px; }
        body.density-compact .market-index-col { padding: 12px 14px; }
        body.density-compact .market-overview-grid { gap: 12px; }
        body.density-compact .performer-card { padding: 0; }
        body.density-compact .performer-row { padding: 10px 14px; }
        
        /* Animation pour les changements de valeurs */
        @keyframes valueFlash {
            0% { background-color: transparent; }
            50% { background-color: var(--accent-subtle); }
            100% { background-color: transparent; }
        }
        
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        .value-change {
            animation: valueFlash 0.3s ease-out;
        }
        
        /* Header */
        .main-header {
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            right: 0;
            height: var(--header-height);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            z-index: 100;
            transition: all 0.3s ease;
        }
        
        .dark .main-header {
            background: linear-gradient(180deg, rgba(10, 25, 41, 0.9) 0%, rgba(8, 20, 35, 0.85) 100%);
            border-bottom: 1px solid var(--card-border);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .light .main-header {
            background-color: rgba(240, 245, 255, 0.9);
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            font-weight: 900;
            font-size: 1.5rem;
            letter-spacing: 1px;
        }
        
        .logo-container a {
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .dark .logo-container a {
            color: var(--text-color);
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.05);
        }
        
        .light .logo-container a {
            color: var(--light-text-color);
        }
        
        .pulse-dot {
            width: 12px;
            height: 12px;
            background-color: var(--accent-color);
            border-radius: 50%;
            margin-right: 10px;
            box-shadow: 0 0 8px var(--accent-color);
            animation: pulse 2s infinite;
        }
        
        .main-nav {
            display: flex;
            margin-left: 40px;
        }
        
        .main-nav a {
            margin-right: 30px;
            padding: 8px 5px;
            font-weight: 500;
            position: relative;
            transition: color 0.3s;
            text-decoration: none;
        }
        
        .dark .main-nav a {
            color: rgba(255, 255, 255, 0.85);
        }
        
        .light .main-nav a {
            color: var(--light-text-color);
        }
        
        .main-nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: width 0.3s;
        }
        
        .main-nav a:hover::after,
        .main-nav a.active::after {
            width: 100%;
        }
        
        .main-nav a.active {
            color: var(--accent-color);
        }
        
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .market-status {
            display: flex;
            align-items: center;
            margin-right: 30px;
            font-size: 0.875rem;
            transition: color 0.3s ease;
        }
        
        .dark .market-status {
            color: var(--text-color);
        }
        
        .light .market-status {
            color: var(--light-text-color);
        }
        
        .market-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .market-indicator.green {
            background-color: #4CAF50;
            box-shadow: 0 0 6px rgba(76, 175, 80, 0.4);
        }
        
        .market-time {
            margin-left: 10px;
            font-weight: 600;
            font-variant-numeric: tabular-nums;
            color: var(--accent-color);
        }
        
        .search-button {
            padding: 10px 20px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .dark .search-button {
            background-color: var(--accent-subtle);
            border: 1px solid var(--accent-medium);
            color: var(--text-color);
        }
        
        .light .search-button {
            background-color: rgba(34, 197, 94, 0.08);
            border: 1px solid rgba(34, 197, 94, 0.2);
            color: var(--light-text-color);
        }
        
        .search-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--accent-glow);
        }
        
        .dark .search-button:hover {
            background-color: var(--accent-medium);
        }
        
        .light .search-button:hover {
            background-color: rgba(34, 197, 94, 0.15);
        }
        
        .search-button i {
            margin-right: 8px;
            color: var(--accent-color);
        }
        
        /* Sidebar de navigation verticale */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            z-index: 101;
            transition: background-color 0.3s ease, border-right 0.3s ease, box-shadow 0.3s ease;
        }
        
        .dark .sidebar {
            background: linear-gradient(180deg, rgba(8, 20, 35, 0.98) 0%, rgba(6, 15, 28, 0.95) 100%);
            border-right: 1px solid var(--card-border);
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
        }
        
        .light .sidebar {
            background-color: rgba(230, 240, 255, 0.95);
            border-right: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.05);
        }
        
        .sidebar-logo {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--accent-color);
            margin-bottom: 40px;
            text-shadow: 0 0 8px rgba(34, 197, 94, 0.3);
        }
        
        .sidebar-nav {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
        }
        
        .nav-item {
            margin-bottom: 24px;
            width: 42px;
            height: 42px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            transition: all 0.3s;
            position: relative;
            text-decoration: none;
        }

        /* Notification badge for alerts */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 10px;
            height: 10px;
            background-color: #ef4444;
            border-radius: 50%;
            box-shadow: 0 0 6px rgba(239, 68, 68, 0.4);
        }
        
        .dark .nav-item {
            color: rgba(255, 255, 255, 0.75);
        }
        
        .light .nav-item {
            color: rgba(0, 0, 0, 0.65);
        }
        
        .dark .nav-item:hover, .dark .nav-item.active {
            background-color: var(--accent-subtle);
            color: var(--accent-color);
            box-shadow: var(--accent-glow);
            transform: translateY(-2px);
        }
        
        .light .nav-item:hover, .light .nav-item.active {
            background-color: rgba(34, 197, 94, 0.08);
            color: var(--accent-color);
        }
        
        .nav-item i {
            font-size: 1.2rem;
        }
        
        /* Mode sombre/clair toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .theme-toggle-btn {
            background: none;
            border: none;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .dark .theme-toggle-btn {
            color: var(--text-color);
            background-color: rgba(255, 255, 255, 0.08);
        }
        
        .light .theme-toggle-btn {
            color: var(--light-text-color);
            background-color: rgba(0, 0, 0, 0.08);
        }
        
        .theme-toggle-btn:hover {
            transform: scale(1.1);
        }
        
        /* Main container avec plus d'air */
        .main-container {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            padding: 40px 24px;
            min-height: calc(100vh - var(--header-height));
            transition: background-color 0.3s ease;
        }
        
        @media (min-width: 1280px) {
            .main-container {
                padding: 48px 32px;
            }
        }

        /* Glassmorphism cards avec blur réduit */
        .glassmorphism {
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            border: 1px solid var(--card-border);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .dark .glassmorphism {
            background-color: var(--card-bg);
        }
        
        .light .glassmorphism {
            background-color: rgba(240, 245, 255, 0.75);
        }
        
        .glassmorphism:hover {
            box-shadow: var(--accent-glow-strong);
        }

        /* Data table styles améliorés avec zebra stripes */
        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .data-table th {
            padding: 14px 18px;
            font-weight: 600;
            font-size: 0.8rem;
            text-align: left;
            border-bottom: 1px solid var(--card-border);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: rgba(255, 255, 255, 0.85);
            background: var(--card-header);
            position: sticky;
            top: 0;
            z-index: 10;
            cursor: pointer;
        }
        
        /* Alignement à droite pour les colonnes numériques */
        .data-table th:nth-child(3),
        .data-table th:nth-child(4),
        .data-table th:nth-child(5) {
            text-align: right;
        }
        
        .data-table th:hover {
            background: linear-gradient(180deg, rgba(20, 50, 75, 0.95) 0%, rgba(15, 35, 55, 0.95) 100%);
        }
        
        .data-table td {
            padding: 20px 18px;
            font-size: 0.925rem;
            border-bottom: 1px solid var(--separator-color);
            transition: background-color 0.2s ease;
        }
        
        .data-table tbody tr:nth-child(odd) td {
            background-color: rgba(255, 255, 255, 0.02);
        }
        
        .data-table tbody tr:hover td {
            background-color: rgba(255, 255, 255, 0.04);
        }
        
        .data-table td:nth-child(2) {
            max-width: 420px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .data-table td:nth-child(3),
        .data-table td:nth-child(4),
        .data-table td:nth-child(5) {
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.01em;
            text-align: right;
        }
        
        /* Sticky first column sur desktop */
        @media (min-width: 1024px) {
            .data-table th:first-child,
            .data-table td:first-child {
                position: sticky;
                left: 0;
                z-index: 1;
                background: linear-gradient(180deg, rgba(15, 40, 65, 0.95) 0%, rgba(10, 25, 45, 0.95) 100%);
                backdrop-filter: blur(4px);
            }
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }

        /* Positive, negative, and neutral values avec meilleur contraste */
        .positive {
            color: var(--accent-color);
            font-weight: 600;
        }
        
        .positive::before {
            content: "▲ ";
            font-size: 0.8em;
        }
        
        .negative {
            color: var(--negative-color);
            font-weight: 600;
        }
        
        .negative::before {
            content: "▼ ";
            font-size: 0.8em;
        }
        
        .neutral {
            color: var(--neutral-color);
            font-weight: 600;
        }
        
        .neutral::before {
            content: "➝ ";
            font-size: 0.8em;
        }

        /* Aperçu des marchés mondiaux amélioré */
        .market-overview-section {
            margin-bottom: 3rem;
        }
        
        .market-overview-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: white;
            display: flex;
            align-items: center;
            letter-spacing: -0.025em;
        }
        
        .market-overview-title::before {
            content: '';
            display: inline-block;
            width: 24px;
            height: 3px;
            background-color: var(--accent-color);
            margin-right: 12px;
            border-radius: 2px;
            box-shadow: 0 0 6px var(--accent-color);
        }
        
        /* Nouvelle mise en page pour l'aperçu des marchés - plus aéré */
        .market-overview-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 14px;
        }
        
        .market-region-header {
            background: var(--card-header);
            padding: 14px 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 0.95rem;
            color: white;
            border-radius: 10px;
            grid-column: span 4;
            margin-bottom: 4px;
        }
        
        .market-index-col {
            padding: 18px 20px;
            background-color: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 10px;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .market-index-col:hover {
            background-color: rgba(15, 40, 70, 0.6);
            box-shadow: inset 0 0 15px rgba(34, 197, 94, 0.02);
            transform: translateY(-1px);
        }
        
        .market-index-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.95);
        }
        
        .market-index-data {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }
        
        .market-value {
            font-weight: 700;
            font-size: 1.2rem;
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.02em;
            transition: color 0.3s ease;
        }
        
        .market-ytd {
            font-size: 0.75rem;
            opacity: 0.85;
            padding: 2px 8px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.02em;
            transition: all 0.3s ease;
        }
        
        /* Top performers en bandeau horizontal */
        .tp-strip {
            margin-bottom: 2.5rem;
        }
        
        .tp-strip .performer-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin: 0;
        }
        
        .performer-header {
            background: var(--card-header);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 0.9rem;
            color: white;
            border-bottom: 1px solid var(--card-border);
        }
        
        .performer-row {
            padding: 14px 16px;
            border-bottom: 1px solid var(--separator-color);
            display: flex;
            justify-content: space-between;
            transition: background-color 0.2s;
            cursor: pointer;
        }
        
        .performer-row:hover {
            background-color: rgba(255, 255, 255, 0.02);
        }
        
        .performer-row:last-child {
            border-bottom: none;
        }
        
        .performer-info {
            flex: 1;
            margin-right: 8px;
        }
        
        .performer-index {
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 3px;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.2;
        }
        
        .performer-country {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.65);
        }
        
        .performer-value {
            font-weight: 700;
            text-align: right;
            min-width: 65px;
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.01em;
            font-size: 0.9rem;
        }

        /* Autres styles */
        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: white;
            display: flex;
            align-items: center;
            letter-spacing: -0.025em;
        }
        
        .section-title::before {
            content: '';
            display: inline-block;
            width: 24px;
            height: 3px;
            background-color: var(--accent-color);
            margin-right: 12px;
            border-radius: 2px;
            box-shadow: 0 0 6px var(--accent-color);
        }

        /* Cards with consistent headers */
        .card-header {
            padding: 12px 16px;
            border-bottom: 1px solid var(--card-border);
            background: var(--card-header);
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-header h3 {
            font-weight: 600;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.95);
        }
        
        .card-body {
            padding: 18px;
        }

        /* Animations */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.6); }
            70% { box-shadow: 0 0 0 8px rgba(34, 197, 94, 0); }
            100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }

        /* Loader */
        .loader {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid rgba(34, 197, 94, 0.15);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Region Tabs sticky avec accessibilité */
        .region-tabs {
            display: flex;
            margin-bottom: 20px;
            background: var(--card-header);
            border-radius: 10px;
            overflow-x: auto;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: calc(var(--header-height) + 8px);
            z-index: 20;
        }
        
        .region-tab {
            padding: 14px 28px;
            cursor: pointer;
            position: relative;
            font-weight: 500;
            opacity: 0.75;
            transition: all 0.3s ease;
            letter-spacing: 0.02em;
            white-space: nowrap;
        }
        
        .region-tab:hover {
            background-color: var(--accent-subtle);
            opacity: 0.9;
        }
        
        .region-tab.active {
            opacity: 1;
            color: var(--accent-color);
            background-color: var(--accent-subtle);
        }
        
        .region-tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background-color: var(--accent-color);
            transition: width 0.3s ease;
            box-shadow: 0 0 6px var(--accent-color);
        }
        
        .region-tab.active::after {
            width: 100%;
        }
        
        /* Focus visible pour accessibilité */
        .region-tab:focus-visible,
        .nav-item:focus-visible,
        .search-button:focus-visible {
            outline: 2px solid var(--accent-color);
            outline-offset: 3px;
        }

        /* Button styling */
        .action-button {
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.2s ease;
            background-color: var(--accent-subtle);
            color: var(--accent-color);
            border: 1px solid var(--accent-medium);
            cursor: pointer;
        }
        
        .action-button:hover {
            background-color: var(--accent-medium);
            transform: translateY(-1px);
        }
        
        /* Search input */
        .table-search-input {
            padding: 8px 12px;
            border-radius: 6px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            width: 100%;
            max-width: 600px;
            transition: all 0.3s ease;
        }
        
        .table-search-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
        }
        
        .table-search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        /* Responsive */
        @media (max-width: 1280px) {
            .market-overview-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .market-region-header {
                grid-column: span 3;
            }
        }
        
        @media (max-width: 1024px) {
            .market-overview-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .market-region-header {
                grid-column: span 2;
            }
        }
        
        @media (max-width: 768px) {
            .main-header {
                left: 0;
                padding: 0 20px;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                flex-direction: row;
                padding: 10px 20px;
                justify-content: space-between;
                position: fixed;
                bottom: 0;
                top: auto;
                border-top: 1px solid var(--card-border);
                border-right: none;
            }
            
            .sidebar-logo {
                display: none;
            }
            
            .sidebar-nav {
                flex-direction: row;
                justify-content: space-around;
                width: 100%;
                margin: 0;
            }
            
            .nav-item {
                margin: 0;
            }
            
            .main-container {
                margin-left: 0;
                margin-top: calc(var(--header-height));
                margin-bottom: 60px;
                padding: 24px 16px;
            }
            
            .main-nav {
                display: none;
            }
            
            .region-tabs {
                position: static;
            }
            
            .market-overview-grid {
                display: block;
            }
            
            .market-region-header {
                grid-column: 1;
                margin-bottom: 8px;
            }
            
            .market-index-col {
                margin-bottom: 8px;
            }
        }
    </style>
</head>
<body class="dark">
    <!-- Bouton du sélecteur de thème -->
    <div class="theme-toggle">
        <button id="theme-toggle-btn" class="theme-toggle-btn" aria-label="Basculer le thème">
            <i class="fas fa-moon" id="dark-icon"></i>
            <i class="fas fa-sun" id="light-icon" style="display: none;"></i>
        </button>
    </div>

    <!-- Sidebar de navigation verticale -->
    <aside class="sidebar">
        <div class="sidebar-logo">TP</div>
        <nav class="sidebar-nav" role="navigation">
            <a href="actualites.html" class="nav-item" title="Actualités" aria-label="Actualités">
                <i class="fas fa-newspaper"></i>
            </a>
            <a href="portefeuille.html" class="nav-item" title="Portefeuilles" aria-label="Portefeuilles">
                <i class="fas fa-chart-pie"></i>
            </a>
            <a href="dashboard.html" class="nav-item" title="Tableau de bord" aria-label="Tableau de bord">
                <i class="fas fa-tachometer-alt"></i>
            </a>
            <a href="marches.html" class="nav-item active" title="Marchés" aria-label="Marchés" aria-current="page">
                <i class="fas fa-chart-line"></i>
            </a>
            <a href="email-preview.html" class="nav-item" title="Alertes" aria-label="Alertes">
                <i class="fas fa-bell"></i>
                <span class="notification-badge"></span>
            </a>
            <a href="parametres.html" class="nav-item" title="Paramètres" aria-label="Paramètres">
                <i class="fas fa-cog"></i>
            </a>
        </nav>
    </aside>

    <!-- Header principal -->
    <header class="main-header">
        <div class="header-left">
            <div class="logo-container">
                <div class="pulse-dot"></div>
                <a href="index.html">TRADEPULSE</a>
            </div>
            <nav class="main-nav">
                <a href="actualites.html">Actualités</a>
                <a href="portefeuille.html">Portefeuilles</a>
                <a href="dashboard.html">Tableau de bord</a>
                <a href="marches.html" class="active">Marchés</a>
            </nav>
        </div>
        <div class="header-right">
            <div class="market-status">
                <div class="market-indicator green"></div>
                <span>Marché ouvert</span>
                <span class="market-time" id="marketTime" aria-live="polite">09:45:22</span>
            </div>
            <a href="recherche.html" class="search-button ripple">
                <i class="fas fa-search"></i>
                <span>Ma question</span>
            </a>
        </div>
    </header>

    <!-- Container principal -->
    <main class="main-container">
        <div class="mx-auto xl:max-w-8xl 2xl:max-w-9xl 3xl:max-w-10xl px-6 md:px-8 xl:px-12">
            <!-- Header avec titre et dernière mise à jour -->
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10">
                <div>
                    <h1 class="text-3xl font-bold tracking-tight mb-3">Indices Boursiers Internationaux</h1>
                    <p class="text-gray-400">Dernière mise à jour: <span id="last-update-time" class="font-medium" aria-live="polite">Chargement...</span></p>
                </div>
                <div class="mt-4 md:mt-0">
                    <button id="density-toggle" class="action-button">
                        <i class="fas fa-compress-alt mr-2"></i>
                        Densité : Confort
                    </button>
                </div>
            </div>
            
            <!-- Aperçu des marchés mondiaux compact -->
            <div class="market-overview-section mb-12">
                <h2 class="market-overview-title">Aperçu des marchés mondiaux</h2>
                
                <div class="market-overview-grid">
                    <!-- EUROPE -->
                    <div class="market-region-header">
                        <span>Europe</span>
                        <span id="europe-trend" class="text-sm positive" aria-label="Tendance Europe"><i class="fas fa-arrow-up"></i></span>
                    </div>
                    
                    <div class="market-index-col" data-index="cac40">
                        <div class="market-index-name">CAC 40</div>
                        <div class="market-index-data">
                            <div class="market-value negative">−0,35%</div>
                            <div class="market-ytd positive">YTD 7,87%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="dax">
                        <div class="market-index-name">DAX</div>
                        <div class="market-index-data">
                            <div class="market-value negative">−0,55%</div>
                            <div class="market-ytd positive">YTD 13,27%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="ftse100">
                        <div class="market-index-name">FTSE 100</div>
                        <div class="market-index-data">
                            <div class="market-value positive">0,20%</div>
                            <div class="market-ytd positive">YTD 4,71%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="eurostoxx50">
                        <div class="market-index-name">Euro Stoxx 50</div>
                        <div class="market-index-data">
                            <div class="market-value negative">−0,25%</div>
                            <div class="market-ytd positive">YTD 9,19%</div>
                        </div>
                    </div>
                    
                    <!-- AMÉRIQUE DU NORD -->
                    <div class="market-region-header">
                        <span>Amérique du Nord</span>
                        <span id="north-america-trend" class="text-sm positive" aria-label="Tendance Amérique du Nord"><i class="fas fa-arrow-up"></i></span>
                    </div>
                    
                    <div class="market-index-col" data-index="sp500">
                        <div class="market-index-name">S&P 500</div>
                        <div class="market-index-data">
                            <div class="market-value positive">0,49%</div>
                            <div class="market-ytd negative">YTD −4,80%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="dowjones">
                        <div class="market-index-name">Dow Jones</div>
                        <div class="market-index-data">
                            <div class="market-value negative">−0,20%</div>
                            <div class="market-ytd negative">YTD −2,80%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="nasdaq">
                        <div class="market-index-name">Nasdaq</div>
                        <div class="market-index-data">
                            <div class="market-value positive">1,22%</div>
                            <div class="market-ytd negative">YTD −8,61%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="vix">
                        <div class="market-index-name">VIX</div>
                        <div class="market-index-data">
                            <div class="market-value positive">0,82%</div>
                            <div class="market-ytd positive">YTD 4,95%</div>
                        </div>
                    </div>
                    
                    <!-- AMÉRIQUE LATINE -->
                    <div class="market-region-header">
                        <span>Amérique Latine</span>
                        <span id="latin-america-trend" class="text-sm positive" aria-label="Tendance Amérique Latine"><i class="fas fa-arrow-up"></i></span>
                    </div>
                    
                    <div class="market-index-col" data-index="brazil">
                        <div class="market-index-name">Brazil</div>
                        <div class="market-index-data">
                            <div class="market-value positive">1,42%</div>
                            <div class="market-ytd positive">YTD 9,15%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="mexico">
                        <div class="market-index-name">Mexico</div>
                        <div class="market-index-data">
                            <div class="market-value positive">0,15%</div>
                            <div class="market-ytd positive">YTD 9,20%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="chile">
                        <div class="market-index-name">Chile</div>
                        <div class="market-index-data">
                            <div class="market-value positive">0,38%</div>
                            <div class="market-ytd positive">YTD 17,11%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="merval">
                        <div class="market-index-name">Merval</div>
                        <div class="market-index-data">
                            <div class="market-value negative">−1,79%</div>
                            <div class="market-ytd negative">YTD −11,90%</div>
                        </div>
                    </div>
                    
                    <!-- ASIE -->
                    <div class="market-region-header">
                        <span>Asie</span>
                        <span id="asia-trend" class="text-sm negative" aria-label="Tendance Asie"><i class="fas fa-arrow-down"></i></span>
                    </div>
                    
                    <div class="market-index-col" data-index="nikkei">
                        <div class="market-index-name">Nikkei 225</div>
                        <div class="market-index-data">
                            <div class="market-value negative">−0,08%</div>
                            <div class="market-ytd negative">YTD −7,78%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="hangseng">
                        <div class="market-index-name">Hang Seng</div>
                        <div class="market-index-data">
                            <div class="market-value negative">−0,65%</div>
                            <div class="market-ytd positive">YTD 16,28%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="shanghai">
                        <div class="market-index-name">Shanghai</div>
                        <div class="market-index-data">
                            <div class="market-value negative">−0,39%</div>
                            <div class="market-ytd positive">YTD 0,21%</div>
                        </div>
                    </div>
                    
                    <div class="market-index-col" data-index="sensex">
                        <div class="market-index-name">BSE Sensex</div>
                        <div class="market-index-data">
                            <div class="market-value positive">0,14%</div>
                            <div class="market-ytd positive">YTD 2,86%</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Top Performers en bandeau horizontal -->
            <section class="tp-strip mb-10" aria-labelledby="tp-title">
                <div class="flex items-center justify-between mb-4">
                    <h2 id="tp-title" class="section-title !mb-0">Top performers</h2>
                </div>

                <div id="tp-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
                    <div class="performer-card">
                        <div class="performer-header">
                            <span>Top 3 Hausse (Jour)</span>
                            <span class="text-sm positive" aria-label="Hausse"><i class="fas fa-arrow-up"></i></span>
                        </div>
                        <div id="daily-top">
                            <!-- Données injectées par JS -->
                        </div>
                    </div>
                    
                    <div class="performer-card">
                        <div class="performer-header">
                            <span>Top 3 Baisse (Jour)</span>
                            <span class="text-sm negative" aria-label="Baisse"><i class="fas fa-arrow-down"></i></span>
                        </div>
                        <div id="daily-bottom">
                            <!-- Données injectées par JS -->
                        </div>
                    </div>
                    
                    <div class="performer-card">
                        <div class="performer-header">
                            <span>Top 3 Hausse (YTD)</span>
                            <span class="text-sm positive" aria-label="Hausse YTD"><i class="fas fa-arrow-up"></i></span>
                        </div>
                        <div id="ytd-top">
                            <!-- Données injectées par JS -->
                        </div>
                    </div>
                    
                    <div class="performer-card">
                        <div class="performer-header">
                            <span>Top 3 Baisse (YTD)</span>
                            <span class="text-sm negative" aria-label="Baisse YTD"><i class="fas fa-arrow-down"></i></span>
                        </div>
                        <div id="ytd-bottom">
                            <!-- Données injectées par JS -->
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Onglets des régions sticky -->
            <div class="mb-12">
                <h2 class="section-title">Indices par région</h2>
                
                <!-- Barre de recherche seule -->
                <div class="mb-4">
                    <input id="table-search" type="text" placeholder="Rechercher pays ou libellé..." class="table-search-input">
                </div>
                
                <div class="region-tabs" role="tablist">
                    <div class="region-tab active" data-region="europe" role="tab" aria-selected="true" tabindex="0">Europe</div>
                    <div class="region-tab" data-region="north-america" role="tab" aria-selected="false" tabindex="0">Amérique du Nord</div>
                    <div class="region-tab" data-region="latin-america" role="tab" aria-selected="false" tabindex="0">Amérique Latine</div>
                    <div class="region-tab" data-region="asia" role="tab" aria-selected="false" tabindex="0">Asie</div>
                    <div class="region-tab" data-region="other" role="tab" aria-selected="false" tabindex="0">Autres</div>
                </div>
                
                <!-- Conteneur pour le tableau des indices -->
                <div class="glassmorphism rounded-lg overflow-hidden">
                    <div id="indices-loading" class="py-16 flex justify-center">
                        <div class="loader"></div>
                    </div>
                    
                    <div id="indices-error" class="py-16 text-center hidden">
                        <i class="fas fa-exclamation-triangle text-red-500 text-4xl mb-4"></i>
                        <p class="text-lg">Impossible de charger les données des indices.</p>
                        <button id="retry-button" class="mt-4 search-button inline-flex items-center">
                            <i class="fas fa-sync-alt mr-2"></i>
                            Réessayer
                        </button>
                    </div>
                    
                    <div id="indices-container" class="hidden">
                        <div id="europe-indices" class="region-content" role="tabpanel">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th data-column="0">PAYS</th>
                                            <th data-column="1">LIBELLÉ</th>
                                            <th data-column="2">DERNIER</th>
                                            <th data-column="3">VAR. %</th>
                                            <th data-column="4">VAR/1JANV</th>
                                        </tr>
                                    </thead>
                                    <tbody id="europe-indices-body">
                                        <!-- Les données seront injectées ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div id="north-america-indices" class="region-content hidden" role="tabpanel">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th data-column="0">PAYS</th>
                                            <th data-column="1">LIBELLÉ</th>
                                            <th data-column="2">DERNIER</th>
                                            <th data-column="3">VAR. %</th>
                                            <th data-column="4">VAR/1JANV</th>
                                        </tr>
                                    </thead>
                                    <tbody id="north-america-indices-body">
                                        <!-- Les données seront injectées ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div id="latin-america-indices" class="region-content hidden" role="tabpanel">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th data-column="0">PAYS</th>
                                            <th data-column="1">LIBELLÉ</th>
                                            <th data-column="2">DERNIER</th>
                                            <th data-column="3">VAR. %</th>
                                            <th data-column="4">VAR/1JANV</th>
                                        </tr>
                                    </thead>
                                    <tbody id="latin-america-indices-body">
                                        <!-- Les données seront injectées ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div id="asia-indices" class="region-content hidden" role="tabpanel">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th data-column="0">PAYS</th>
                                            <th data-column="1">LIBELLÉ</th>
                                            <th data-column="2">DERNIER</th>
                                            <th data-column="3">VAR. %</th>
                                            <th data-column="4">VAR/1JANV</th>
                                        </tr>
                                    </thead>
                                    <tbody id="asia-indices-body">
                                        <!-- Les données seront injectées ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div id="other-indices" class="region-content hidden" role="tabpanel">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th data-column="0">PAYS</th>
                                            <th data-column="1">LIBELLÉ</th>
                                            <th data-column="2">DERNIER</th>
                                            <th data-column="3">VAR. %</th>
                                            <th data-column="4">VAR/1JANV</th>
                                        </tr>
                                    </thead>
                                    <tbody id="other-indices-body">
                                        <!-- Les données seront injectées ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER sans cookies -->
    <footer class="mt-16 px-6 mb-20 md:mb-0">
        <div class="mx-auto xl:max-w-8xl 2xl:max-w-9xl 3xl:max-w-10xl px-6 md:px-8 xl:px-12">
            <div class="glassmorphism rounded-xl p-6">
                <div class="grid gap-8 md:grid-cols-3">
                    <!-- Col 1: identité + avertissement -->
                    <div>
                        <div class="flex items-center font-extrabold text-xl tracking-wide mb-3">
                            <span class="w-2 h-2 rounded-full mr-2" style="background-color: var(--accent-color); box-shadow: 0 0 8px var(--accent-color);"></span>
                            TRADEPULSE
                        </div>
                        <p class="text-sm opacity-80 mb-3">
                            Projet de démonstration<br>
                            Développé par Benoit COMAS<br>
                            Hébergé sur GitHub Pages
                        </p>
                        <p class="text-xs opacity-70 leading-relaxed">
                            <strong>Avertissement :</strong>
                            Les informations présentées le sont à titre purement informatif et général.
                            Elles ne constituent ni une recommandation personnalisée ni un conseil en investissement.
                            L'investissement en instruments financiers comporte un risque de perte en capital.
                            Les performances passées ne préjugent pas des performances futures.
                        </p>
                        <p class="mt-3 text-xs opacity-70">
                            <span class="inline-block px-2 py-1 rounded border border-gray-600">
                                Zéro cookie marketing • Zéro traceur tiers
                            </span>
                        </p>
                    </div>

                    <!-- Col 2: navigation légale -->
                    <div>
                        <h3 class="font-semibold mb-3">Informations légales</h3>
                        <ul class="space-y-2 text-sm">
                            <li><a href="mentions-legales.html" class="hover:underline opacity-80 hover:opacity-100">Mentions légales</a></li>
                            <li><a href="cgu.html" class="hover:underline opacity-80 hover:opacity-100">Conditions générales d'utilisation</a></li>
                            <li><a href="confidentialite.html" class="hover:underline opacity-80 hover:opacity-100">Politique de confidentialité</a></li>
                            <li><a href="cookies.html" class="hover:underline opacity-80 hover:opacity-100">Cookies : nous n'en utilisons pas</a></li>
                            <li><a href="accessibilite.html" class="hover:underline opacity-80 hover:opacity-100">Accessibilité</a></li>
                            <li><a href="https://github.com/bencode92/stock-analysis-platform" target="_blank" class="hover:underline opacity-80 hover:opacity-100">Code source sur GitHub</a></li>
                        </ul>
                    </div>

                    <!-- Col 3: source & statut données -->
                    <div>
                        <h3 class="font-semibold mb-3">Données & attribution</h3>
                        <p class="text-sm opacity-80">
                            Cours et données susceptibles d'être retardés ou incomplets.
                            Source : <a href="https://twelvedata.com" target="_blank" rel="noopener" class="text-green-400 hover:underline">Twelve Data</a>.
                            © Les marques citées appartiennent à leurs propriétaires respectifs.
                        </p>
                        <div class="mt-4 text-sm">
                            <span class="opacity-70">Dernière mise à jour</span>
                            <span class="ml-2 font-medium" id="footer-last-update" aria-live="polite">–</span>
                        </div>
                    </div>
                </div>

                <hr class="my-6 border-gray-700 opacity-50">

                <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-3 text-xs opacity-70">
                    <div>© 2025 TRADEPULSE — Projet de démonstration</div>
                    <div class="flex items-center gap-4">
                        <a href="https://github.com/bencode92" target="_blank" class="hover:underline">GitHub @bencode92</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="marches-script.js"></script>
    <script>
        // Toggle densité
        const densityBtn = document.getElementById('density-toggle');
        const saved = localStorage.getItem('density') || 'comfort';
        document.body.classList.toggle('density-compact', saved === 'compact');
        densityBtn.innerHTML = `<i class="fas fa-compress-alt mr-2"></i>Densité : ${saved === 'compact' ? 'Compact' : 'Confort'}`;

        densityBtn.addEventListener('click', () => {
            const isCompact = document.body.classList.toggle('density-compact');
            localStorage.setItem('density', isCompact ? 'compact' : 'comfort');
            densityBtn.innerHTML = `<i class="fas fa-compress-alt mr-2"></i>Densité : ${isCompact ? 'Compact' : 'Confort'}`;
        });

        // Recherche globale sur toutes les régions avec activation de l'onglet
        const searchInput = document.getElementById('table-search');
        searchInput.addEventListener('input', () => {
            const value = searchInput.value.toLowerCase().trim();
            
            if (!value) {
                // Si recherche vide, afficher seulement la région active
                document.querySelectorAll('.region-content').forEach(content => {
                    const isActive = document.querySelector(`.region-tab.active[data-region="${content.id.replace('-indices', '')}"]`);
                    content.classList.toggle('hidden', !isActive);
                    content.querySelectorAll('tbody tr').forEach(tr => {
                        tr.style.display = '';
                    });
                });
                return;
            }
            
            // Recherche globale dans toutes les régions
            const regions = ['europe', 'north-america', 'latin-america', 'asia', 'other'];
            let hasResults = false;
            let firstMatchRegion = null;
            
            regions.forEach(region => {
                const indices = window.indicesData?.indices[region] || [];
                const tbody = document.getElementById(`${region}-indices-body`);
                
                if (!tbody) return;
                
                const rows = tbody.querySelectorAll('tr');
                let regionHasMatch = false;
                
                rows.forEach(tr => {
                    const text = tr.innerText.toLowerCase();
                    const isMatch = text.includes(value);
                    tr.style.display = isMatch ? '' : 'none';
                    if (isMatch) {
                        regionHasMatch = true;
                        if (!firstMatchRegion) {
                            firstMatchRegion = region;
                        }
                    }
                });
                
                // Afficher/masquer la région entière selon les résultats
                document.getElementById(`${region}-indices`).classList.toggle('hidden', !regionHasMatch);
                if (regionHasMatch) hasResults = true;
            });
            
            // Activer automatiquement l'onglet de la première région avec résultat
            if (firstMatchRegion) {
                document.querySelectorAll('.region-tab').forEach(tab => {
                    tab.classList.remove('active');
                    tab.setAttribute('aria-selected', 'false');
                });
                
                const targetTab = document.querySelector(`.region-tab[data-region="${firstMatchRegion}"]`);
                if (targetTab) {
                    targetTab.classList.add('active');
                    targetTab.setAttribute('aria-selected', 'true');
                }
            }
        });

        // Navigation clavier pour les tabs
        document.querySelectorAll('.region-tab').forEach((tab, i, all) => {
            tab.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight') all[(i + 1) % all.length].focus();
                if (e.key === 'ArrowLeft') all[(i - 1 + all.length) % all.length].focus();
            });
        });

        // Tri par colonnes
        const thAscState = new Map();
        
        function sortTableByColumn(table, column) {
            const tbody = table.tBodies[0];
            const rows = Array.from(tbody.querySelectorAll('tr'));
            const asc = !thAscState.get(column);
            thAscState.set(column, asc);
            
            rows.sort((a, b) => {
                const av = a.children[column].innerText.replace(/[^\d,\-−]/g, '').replace(',', '.');
                const bv = b.children[column].innerText.replace(/[^\d,\-−]/g, '').replace(',', '.');
                const na = parseFloat(av);
                const nb = parseFloat(bv);
                
                if (!isNaN(na) && !isNaN(nb)) {
                    return asc ? na - nb : nb - na;
                }
                return asc ? a.children[column].innerText.localeCompare(b.children[column].innerText)
                           : b.children[column].innerText.localeCompare(a.children[column].innerText);
            });
            
            rows.forEach(r => tbody.appendChild(r));
        }

        // Attacher les gestionnaires de tri après chargement
        setTimeout(() => {
            document.querySelectorAll('.data-table thead th').forEach((th, idx) => {
                th.addEventListener('click', () => {
                    sortTableByColumn(th.closest('table'), idx);
                });
            });
        }, 1000);

        // Clic sur Top Performers pour filtrer le tableau
        function wireTpClicks() {
            document.querySelectorAll('#tp-grid .performer-row').forEach(row => {
                row.addEventListener('click', () => {
                    const label = row.querySelector('.performer-index')?.textContent.trim();
                    if (label) {
                        searchInput.value = label;
                        searchInput.dispatchEvent(new Event('input'));
                        document.querySelector('.region-content:not(.hidden)')?.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        }
        setTimeout(wireTpClicks, 1000);

        // Mise à jour de la date dans le footer
        (function(){
            try {
                setTimeout(function() {
                    const ts = window.indicesData?.meta?.timestamp;
                    const el = document.getElementById('footer-last-update');
                    if (ts && el) {
                        el.textContent = new Intl.DateTimeFormat('fr-FR', {
                            dateStyle: 'long',
                            timeStyle: 'medium',
                            timeZone: 'Europe/Paris'
                        }).format(new Date(ts));
                    }
                }, 2000);
            } catch(e) {}
        })();
    </script>
</body>
</html>