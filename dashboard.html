<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradePulse - Tableau de Bord</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="dashboard-enhanced.css">
    <script type="module" src="aiintegration.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        neon: {
                            green: '#00FF87',
                            blue: '#00FFFF',
                            purple: '#9D00FF'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        future: ['Orbitron', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        /* Variables et styles de base */
        :root {
            --background-color: #011627; /* Bleu nuit */
            --background-gradient: linear-gradient(135deg, #010e1a, #011627 70%);
            --text-color: #FFFFFF;
            --accent-color: #00FF87; /* Vert néon */
            --accent-glow: 0 0 20px rgba(0, 255, 135, 0.6);
            --accent-glow-strong: 0 0 30px rgba(0, 255, 135, 0.8), 0 0 50px rgba(0, 255, 135, 0.4);
            --transition-time: 0.3s;
            --header-height: 70px;
            --sidebar-width: 80px;
            --card-bg: rgba(1, 22, 39, 0.6);
            --card-border: rgba(0, 255, 135, 0.2);
            --card-hover-border: rgba(0, 255, 135, 0.4);
            --card-header-bg: rgba(1, 30, 52, 0.8);
        }
        
        body {
            background: var(--background-gradient);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--text-color);
            line-height: 1.6;
            letter-spacing: 0.015em;
        }
        
        /* Réseau de fond animé */
        .network-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .node {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: var(--accent-color);
            border-radius: 50%;
            opacity: 0.4;
        }
        
        .node.pulse {
            animation: node-pulse 3s infinite;
        }
        
        .connection {
            position: absolute;
            height: 1px;
            transform-origin: 0 0;
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
            opacity: 0.2;
        }
        
        /* Header futuriste avec date en évidence */
        .futuristic-date {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            color: var(--accent-color);
            text-shadow: var(--accent-glow);
            letter-spacing: 3px;
            position: relative;
            display: inline-block;
        }
        
        .futuristic-date::before,
        .futuristic-date::after {
            content: '';
            position: absolute;
            top: 50%;
            height: 2px;
            width: 60px;
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
        }
        
        .futuristic-date::before {
            right: 120%;
        }
        
        .futuristic-date::after {
            left: 120%;
        }
        
        .time-display {
            font-family: 'Orbitron', sans-serif;
            color: rgba(255, 255, 255, 0.8);
            letter-spacing: 2px;
        }
        
        /* Effets de glassmorphisme pour les cartes */
        .glassmorphism {
            background-color: var(--card-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--card-border);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .glassmorphism:hover {
            border-color: var(--card-hover-border);
            box-shadow: 0 8px 32px rgba(0, 255, 135, 0.15);
            transform: translateY(-2px);
        }
        
        /* Barre de progression pour les crédits API */
        .progress-bar {
            height: 8px;
            border-radius: 8px;
            overflow: hidden;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .progress-value {
            height: 100%;
            border-radius: 8px;
            background: linear-gradient(90deg, #00FF87, #00FFFF);
            box-shadow: 0 0 10px rgba(0, 255, 135, 0.5);
            transition: width 1.5s ease;
        }
        
        /* Indicateurs de tendance */
        .trend-up {
            color: #4CAF50;
        }
        
        .trend-down {
            color: #FF5252;
        }
        
        /* Sidebar de navigation verticale */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background-color: rgba(1, 15, 26, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            z-index: 101;
            border-right: 1px solid rgba(0, 255, 135, 0.1);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
        }
        
        .sidebar-logo {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--accent-color);
            margin-bottom: 40px;
            text-shadow: 0 0 10px rgba(0, 255, 135, 0.5);
        }
        
        .sidebar-nav {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            gap: 22px;
        }
        
        .nav-item {
            width: 48px;
            height: 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
            transition: all 0.3s;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            position: relative;
        }
        
        .nav-item:hover, .nav-item.active {
            background-color: rgba(0, 255, 135, 0.1);
            color: var(--accent-color);
            transform: translateY(-2px);
        }
        
        .nav-item i {
            font-size: 1.3rem;
        }

        /* Notification badge for alerts */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 10px;
            height: 10px;
            background-color: #ff4757;
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(255, 71, 87, 0.6);
        }
        
        /* Header principal */
        .main-header {
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            right: 0;
            height: var(--header-height);
            background-color: rgba(1, 22, 39, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            z-index: 100;
            border-bottom: 1px solid rgba(0, 255, 135, 0.1);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            font-weight: 900;
            font-size: 1.5rem;
            letter-spacing: 1px;
        }
        
        .pulse-dot {
            width: 12px;
            height: 12px;
            background-color: var(--accent-color);
            border-radius: 50%;
            margin-right: 10px;
            box-shadow: 0 0 10px var(--accent-color);
            animation: pulse 2s infinite;
        }
        
        .main-nav {
            display: flex;
            margin-left: 40px;
            gap: 30px;
        }
        
        .main-nav a {
            padding: 8px 5px;
            font-weight: 500;
            position: relative;
            transition: color 0.3s;
            text-decoration: none;
            color: var(--text-color);
        }
        
        .main-nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: width 0.3s;
        }
        
        .main-nav a:hover::after,
        .main-nav a.active::after {
            width: 100%;
        }
        
        .main-nav a.active {
            color: var(--accent-color);
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .market-status {
            display: flex;
            align-items: center;
            font-size: 0.875rem;
        }
        
        .market-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .market-indicator.green {
            background-color: #4CAF50;
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.6);
        }
        
        .market-time {
            margin-left: 10px;
            font-weight: 600;
            color: var(--accent-color);
        }
        
        .search-button {
            padding: 12px 22px;
            background-color: rgba(0, 255, 135, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            border: 1px solid rgba(0, 255, 135, 0.3);
            text-decoration: none;
            color: var(--text-color);
        }
        
        .search-button:hover {
            background-color: rgba(0, 255, 135, 0.2);
            transform: translateY(-2px);
        }
        
        .search-button i {
            margin-right: 8px;
            color: var(--accent-color);
        }
        
        /* Conteneur principal */
        .main-container {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            min-height: calc(100vh - var(--header-height));
            padding: 30px;
        }
        
        /* Tableau de bord */
        .dashboard-container {
            max-width: 1800px;
            margin: 0 auto;
        }
        
        /* Styles améliorés pour les cards */
        .card-header {
            background-color: var(--card-header-bg);
            padding: 16px;
            border-bottom: 1px solid var(--card-border);
        }
        
        .card-content {
            padding: 20px;
        }
        
        /* Styles pour les sections */
        .dashboard-section {
            margin-bottom: 2rem;
        }
        
        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--accent-color);
            display: flex;
            align-items: center;
        }
        
        .section-title::before {
            content: '';
            display: inline-block;
            width: 24px;
            height: 3px;
            background-color: var(--accent-color);
            margin-right: 10px;
            border-radius: 2px;
            box-shadow: 0 0 8px var(--accent-color);
        }
        
        /* Animations */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 255, 135, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 255, 135, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 255, 135, 0); }
        }
        
        @keyframes node-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(2); opacity: 0.1; }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 1s ease forwards;
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 5px rgba(0, 255, 135, 0.5); }
            50% { box-shadow: 0 0 20px rgba(0, 255, 135, 0.8); }
            100% { box-shadow: 0 0 5px rgba(0, 255, 135, 0.5); }
        }
        
        .glow-effect {
            animation: glow 2s infinite;
        }
        
        /* Événements et actualités */
        .event-card {
            position: relative;
            transition: all 0.3s ease;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .event-card:hover {
            transform: translateX(5px);
        }
        
        .news-card {
            position: relative;
            transition: all 0.3s ease;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .news-card:hover {
            transform: translateX(5px);
        }
        
        /* Style pour la notification d'email de résumé */
        .email-summary-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(1, 22, 39, 0.9);
            border: 1px solid rgba(0, 255, 135, 0.4);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            max-width: 300px;
            transform: translateY(150%);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .email-summary-notification.show {
            transform: translateY(0);
        }

        .email-notification-icon {
            background-color: rgba(0, 255, 135, 0.15);
            border-radius: 50%;
            width: 42px;
            height: 42px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--accent-color);
            margin-right: 12px;
            font-size: 1.2rem;
        }

        .email-notification-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            gap: 10px;
        }

        .email-notification-actions button {
            padding: 8px 14px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .email-notification-primary {
            background-color: var(--accent-color);
            color: var(--background-color);
            border: none;
            flex: 1.5;
        }

        .email-notification-secondary {
            background-color: transparent;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            flex: 1;
        }

        .email-notification-primary:hover {
            background-color: rgba(0, 255, 135, 0.8);
            transform: translateY(-2px);
        }

        .email-notification-secondary:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        /* Styles pour les tableaux */
        .data-table {
            width: 100%;
            border-spacing: 0;
            border-collapse: separate;
        }

        .data-table th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .data-table td {
            padding: 14px 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.95rem;
        }

        .data-table tbody tr:hover {
            background-color: rgba(0, 255, 135, 0.05);
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Widget-specific styles */
        #markets-widget .text-2xl.font-bold {
            font-size: 1.75rem;
            margin: 10px 0;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 0.05em;
        }

        /* Stats cards */
        .stat-card {
            background-color: rgba(1, 30, 52, 0.4);
            border-radius: 12px;
            padding: 16px;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background-color: rgba(1, 30, 52, 0.6);
            transform: translateY(-2px);
        }

        .stat-card .title {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 4px;
        }

        .stat-card .value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .stat-card .change {
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            margin-top: 4px;
        }

        /* Portfolio tables */
        .portfolio-table {
            width: 100%;
            border-spacing: 0;
        }

        .portfolio-table th {
            padding: 10px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .portfolio-table td {
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .portfolio-table tr:last-child td {
            border-bottom: none;
        }

        .portfolio-table tr:hover {
            background-color: rgba(0, 255, 135, 0.05);
        }

        /* Buttons */
        .btn {
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: rgba(0, 255, 135, 0.15);
            color: var(--accent-color);
            border: 1px solid rgba(0, 255, 135, 0.3);
        }

        .btn-primary:hover {
            background-color: rgba(0, 255, 135, 0.25);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .grid-cols-dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                bottom: 0;
                top: auto;
                width: 100%;
                height: 70px;
                flex-direction: row;
                justify-content: space-around;
                border-right: none;
                border-top: 1px solid rgba(0, 255, 135, 0.1);
            }
            
            .sidebar-logo {
                display: none;
            }
            
            .sidebar-nav {
                flex-direction: row;
                justify-content: space-around;
                width: 100%;
                margin: 0;
                gap: 10px;
            }
            
            .nav-item {
                margin: 0;
                width: 40px;
                height: 40px;
            }
            
            .main-header {
                left: 0;
                padding: 0 20px;
            }
            
            .main-nav {
                display: none;
            }
            
            .main-container {
                margin-left: 0;
                margin-bottom: 70px;
                padding: 20px 15px;
            }
            
            .futuristic-date {
                font-size: 1.8rem;
            }
            
            .time-display {
                font-size: 1rem;
            }
            
            .futuristic-date::before, 
            .futuristic-date::after {
                width: 40px;
            }
        }

        /* Nouveaux styles pour l'interface réorganisée */
        .welcome-banner {
            background-color: rgba(1, 30, 52, 0.7);
            border-radius: 16px;
            border: 1px solid var(--card-border);
            padding: 20px;
            margin-bottom: 20px;
        }

        .welcome-title {
            color: var(--accent-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .welcome-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            margin-bottom: 15px;
        }

        .understand-btn {
            background-color: rgba(0, 255, 135, 0.15);
            border: 1px solid rgba(0, 255, 135, 0.3);
            color: var(--accent-color);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .understand-btn:hover {
            background-color: rgba(0, 255, 135, 0.25);
            transform: translateY(-2px);
        }

        .central-date {
            text-align: center;
            margin-bottom: 20px;
        }

        .tab-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tab-button {
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-grow: 1;
            text-align: center;
        }

        .tab-button.active {
            background-color: rgba(0, 255, 135, 0.15);
            color: var(--accent-color);
            border: 1px solid rgba(0, 255, 135, 0.3);
        }

        .tab-button:not(.active) {
            background-color: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab-button:hover {
            transform: translateY(-2px);
        }

        .top-performers-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .performer-card {
            background-color: rgba(1, 30, 52, 0.4);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            flex-direction: column;
        }

        .performer-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .performer-title {
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .performer-up {
            color: #4CAF50;
        }

        .performer-down {
            color: #FF5252;
        }

        .performer-value {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .performer-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
        }
    </style>
</head>
<body class="dark">
    <!-- Réseau de fond animé -->
    <div class="network-background" id="network-background"></div>

    <!-- Sidebar de navigation verticale -->
    <aside class="sidebar">
        <div class="sidebar-logo">TP</div>
        <nav class="sidebar-nav">
            <a href="actualites.html" class="nav-item" title="Actualités">
                <i class="fas fa-newspaper"></i>
            </a>
            <a href="portefeuille.html" class="nav-item" title="Portefeuilles">
                <i class="fas fa-chart-pie"></i>
            </a>
            <a href="dashboard.html" class="nav-item active" title="Tableau de bord">
                <i class="fas fa-tachometer-alt"></i>
            </a>
            <a href="marches.html" class="nav-item" title="Marchés">
                <i class="fas fa-chart-line"></i>
            </a>
            <a href="email-preview.html" class="nav-item" title="Alertes">
                <i class="fas fa-bell"></i>
                <span class="notification-badge"></span>
            </a>
            <a href="parametres.html" class="nav-item" title="Paramètres">
                <i class="fas fa-cog"></i>
            </a>
        </nav>
    </aside>

    <!-- Header principal -->
    <header class="main-header">
        <div class="header-left">
            <div class="logo-container">
                <div class="pulse-dot"></div>
                <a href="index.html">TRADEPULSE</a>
            </div>
            <nav class="main-nav">
                <a href="actualites.html">Actualités</a>
                <a href="portefeuille.html">Portefeuilles</a>
                <a href="dashboard.html" class="active">Tableau de bord</a>
            </nav>
        </div>
        <div class="header-right">
            <div class="market-status">
                <div class="market-indicator green"></div>
                <span>Marché ouvert</span>
                <span class="market-time" id="marketTime">09:45:22</span>
            </div>
            <a href="recherche.html" class="search-button ripple">
                <i class="fas fa-search"></i>
                <span>Ma question</span>
            </a>
        </div>
    </header>

    <!-- Conteneur principal -->
    <main class="main-container">
        <div class="dashboard-container">
            <!-- Bannière de bienvenue (une seule) -->
            <div class="welcome-banner">
                <div class="welcome-title">
                    <i class="fas fa-info-circle"></i>
                    Bienvenue sur votre tableau de bord TradePulse
                </div>
                <div class="welcome-description">
                    Ce tableau de bord affiche une vue d'ensemble de votre portefeuille, des marchés et des événements importants. Utilisez les filtres "Agressif", "Modéré" et "Stable" pour changer de vue de portefeuille. Les données des marchés sont mises à jour en temps réel.
                </div>
                <button class="understand-btn">
                    <i class="fas fa-check"></i>
                    J'ai compris
                </button>
            </div>

            <!-- Date centrale -->
            <div class="central-date">
                <div class="futuristic-date text-4xl" id="currentDate">13.03.2025</div>
                <div class="time-display text-xl mt-1" id="currentTime">16:25:34</div>
            </div>

            <!-- Nouvelle structure sans la colonne du camembert -->
            <div class="grid grid-cols-1 gap-6">
                <!-- Agenda financier du jour (en haut) -->
                <div class="glassmorphism" id="events-widget">
                    <div class="flex justify-between items-center p-4 border-b border-neon-green border-opacity-20 bg-[#011e34] bg-opacity-70">
                        <h3 class="text-neon-green font-semibold text-lg flex items-center">
                            <i class="fas fa-calendar-alt mr-2"></i>
                            Agenda financier du jour
                        </h3>
                        <div class="text-sm text-white text-opacity-70" id="events-date">13 Mars 2025</div>
                    </div>
                    <div class="p-4">
                        <div class="flex gap-4 overflow-x-auto pb-3 events-container">
                            <!-- Événement 1 -->
                            <div class="flex items-center p-4 bg-[#011E34] bg-opacity-70 rounded-lg border-l-2 border-red-500 min-w-[300px] event-card">
                                <div class="flex flex-col items-center justify-center bg-black bg-opacity-30 w-14 h-14 rounded-lg mr-4">
                                    <div class="text-lg font-bold">11</div>
                                    <div class="text-xs text-white text-opacity-60">MAR</div>
                                </div>
                                <div class="flex-1">
                                    <div class="font-medium mb-1">Réunion exceptionnelle Fed</div>
                                    <div class="text-neon-green text-sm">08:15</div>
                                </div>
                                <div class="w-10 h-10 flex items-center justify-center rounded-full bg-red-500 bg-opacity-20 text-red-400">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                            
                            <!-- Événement 2 -->
                            <div class="flex items-center p-4 bg-[#011E34] bg-opacity-70 rounded-lg border-l-2 border-yellow-500 min-w-[300px] event-card">
                                <div class="flex flex-col items-center justify-center bg-black bg-opacity-30 w-14 h-14 rounded-lg mr-4">
                                    <div class="text-lg font-bold">11</div>
                                    <div class="text-xs text-white text-opacity-60">MAR</div>
                                </div>
                                <div class="flex-1">
                                    <div class="font-medium mb-1">Résultats trimestriels Amazon</div>
                                    <div class="text-neon-green text-sm">16:30</div>
                                </div>
                                <div class="w-10 h-10 flex items-center justify-center rounded-full bg-yellow-500 bg-opacity-20 text-yellow-400">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                            
                            <!-- Événement 3 -->
                            <div class="flex items-center p-4 bg-[#011E34] bg-opacity-70 rounded-lg border-l-2 border-red-500 min-w-[300px] event-card">
                                <div class="flex flex-col items-center justify-center bg-black bg-opacity-30 w-14 h-14 rounded-lg mr-4">
                                    <div class="text-lg font-bold">11</div>
                                    <div class="text-xs text-white text-opacity-60">MAR</div>
                                </div>
                                <div class="flex-1">
                                    <div class="font-medium mb-1">Données emploi Zone Euro</div>
                                    <div class="text-neon-green text-sm">11:00</div>
                                </div>
                                <div class="w-10 h-10 flex items-center justify-center rounded-full bg-red-500 bg-opacity-20 text-red-400">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                        </div>
                        
                        <a href="actualites.html" class="btn btn-secondary mt-4 inline-flex">
                            Voir le calendrier complet <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>

                <!-- Layout à deux colonnes pour détails du portefeuille et marchés -->
                <div class="grid grid-cols-1 lg:grid-cols-[3fr_2fr] gap-6">
                    <!-- Détails du portefeuille (à gauche) -->
                    <div class="glassmorphism" id="portfolio-widget">
                        <div class="flex justify-between items-center p-4 border-b border-neon-green border-opacity-20 bg-[#011e34] bg-opacity-70">
                            <h3 class="text-neon-green font-semibold text-lg flex items-center">
                                <i class="fas fa-wallet mr-2"></i>
                                Détails du portefeuille
                            </h3>
                        </div>
                        
                        <!-- Onglets de sélection de portefeuille -->
                        <div class="p-4 pb-0">
                            <div class="tab-controls">
                                <button class="tab-button active portfolio-filter" data-portfolio="aggressive">Agressif</button>
                                <button class="tab-button portfolio-filter" data-portfolio="moderate">Modéré</button>
                                <button class="tab-button portfolio-filter" data-portfolio="stable">Stable</button>
                            </div>
                        </div>
                        
                        <div class="p-4">
                            <!-- Résumé des performances -->
                            <div class="flex justify-between mb-4">
                                <div class="p-3 bg-black bg-opacity-20 rounded-lg flex-1 mr-2">
                                    <div class="text-xs text-white text-opacity-60">PERFORMANCE TOTALE</div>
                                    <div class="text-xl font-bold text-neon-green">+7.2%</div>
                                </div>
                                <div class="p-3 bg-black bg-opacity-20 rounded-lg flex-1 ml-2">
                                    <div class="text-xs text-white text-opacity-60">DERNIER MOIS</div>
                                    <div class="text-xl font-bold text-neon-green">+9.8%</div>
                                </div>
                            </div>
                            
                            <!-- Tableau des composants du portefeuille -->
                            <div>
                                <h4 class="font-medium mb-3 text-white text-opacity-80 flex items-center">
                                    <i class="fas fa-list-ul mr-2 text-neon-green"></i>
                                    Composants du portefeuille
                                </h4>
                                <div class="overflow-x-auto">
                                    <table class="portfolio-table">
                                        <thead>
                                            <tr class="text-left text-sm border-b border-white border-opacity-10">
                                                <th class="pb-3">Actif (Nom)</th>
                                                <th class="pb-3">Type</th>
                                                <th class="pb-3 text-right">Allocation (%)</th>
                                                <th class="pb-3 text-right">Perf. (Variation)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b border-white border-opacity-5">
                                                <td class="py-3">NVIDIA Corporation</td>
                                                <td>
                                                    <span class="px-2 py-0.5 text-xs rounded bg-green-500 bg-opacity-20 text-green-400">
                                                        STOCK
                                                    </span>
                                                </td>
                                                <td class="text-right font-medium">30%</td>
                                                <td class="text-right font-medium trend-up">
                                                    <i class="fas fa-caret-up mr-1"></i>+5.5%
                                                </td>
                                            </tr>
                                            <tr class="border-b border-white border-opacity-5">
                                                <td class="py-3">Tesla, Inc.</td>
                                                <td>
                                                    <span class="px-2 py-0.5 text-xs rounded bg-green-500 bg-opacity-20 text-green-400">
                                                        STOCK
                                                    </span>
                                                </td>
                                                <td class="text-right font-medium">20%</td>
                                                <td class="text-right font-medium trend-up">
                                                    <i class="fas fa-caret-up mr-1"></i>+3.3%
                                                </td>
                                            </tr>
                                            <tr class="border-b border-white border-opacity-5">
                                                <td class="py-3">Bitcoin</td>
                                                <td>
                                                    <span class="px-2 py-0.5 text-xs rounded bg-yellow-500 bg-opacity-20 text-yellow-400">
                                                        CRYPTO
                                                    </span>
                                                </td>
                                                <td class="text-right font-medium">15%</td>
                                                <td class="text-right font-medium trend-up">
                                                    <i class="fas fa-caret-up mr-1"></i>+18.7%
                                                </td>
                                            </tr>
                                            <tr class="border-b border-white border-opacity-5">
                                                <td class="py-3">Ethereum</td>
                                                <td>
                                                    <span class="px-2 py-0.5 text-xs rounded bg-yellow-500 bg-opacity-20 text-yellow-400">
                                                        CRYPTO
                                                    </span>
                                                </td>
                                                <td class="text-right font-medium">10%</td>
                                                <td class="text-right font-medium trend-up">
                                                    <i class="fas fa-caret-up mr-1"></i>+9.5%
                                                </td>
                                            </tr>
                                            <tr class="border-b border-white border-opacity-5">
                                                <td class="py-3">ARK Innovation ETF</td>
                                                <td>
                                                    <span class="px-2 py-0.5 text-xs rounded bg-blue-500 bg-opacity-20 text-blue-400">
                                                        ETF
                                                    </span>
                                                </td>
                                                <td class="text-right font-medium">15%</td>
                                                <td class="text-right font-medium trend-up">
                                                    <i class="fas fa-caret-up mr-1"></i>+2.2%
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="py-3">Palantir Technologies</td>
                                                <td>
                                                    <span class="px-2 py-0.5 text-xs rounded bg-green-500 bg-opacity-20 text-green-400">
                                                        STOCK
                                                    </span>
                                                </td>
                                                <td class="text-right font-medium">10%</td>
                                                <td class="text-right font-medium trend-up">
                                                    <i class="fas fa-caret-up mr-1"></i>+3.8%
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="flex mt-4 justify-between">
                                <a href="portefeuille.html" class="btn btn-secondary">
                                    Voir le portefeuille complet <i class="fas fa-arrow-right ml-1"></i>
                                </a>
                                
                                <a href="email-preview.html" id="generateEmailBtn" class="btn btn-primary">
                                    <i class="fas fa-envelope"></i> Générer un résumé
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Aperçu des marchés (à droite) -->
                    <div class="glassmorphism" id="markets-widget">
                        <div class="flex justify-between items-center p-4 border-b border-neon-green border-opacity-20 bg-[#011e34] bg-opacity-70">
                            <h3 class="text-neon-green font-semibold text-lg flex items-center">
                                <i class="fas fa-globe mr-2"></i>
                                Aperçu des marchés
                            </h3>
                            <div class="text-xs text-white text-opacity-70 px-3 py-1 bg-[#011E34] bg-opacity-70 rounded-full flex items-center">
                                <i class="fas fa-sync-alt fa-spin mr-2 text-neon-green"></i>
                                Temps réel
                            </div>
                        </div>
                        <div class="p-4">
                            <h4 class="text-sm text-white text-opacity-70 mb-3">Indices principaux et performances du jour</h4>
                            
                            <!-- Indice 1: S&P 500 -->
                            <div class="bg-[#011E34] bg-opacity-70 p-5 rounded-lg mb-3">
                                <div class="flex justify-between mb-1">
                                    <div class="font-medium">S&P 500</div>
                                    <div class="text-sm trend-up px-2 py-0.5 rounded-full bg-green-900 bg-opacity-20 flex items-center">
                                        <i class="fas fa-caret-up mr-1"></i> 0.00%
                                    </div>
                                </div>
                                <div class="text-2xl font-bold mb-1">5 599,30</div>
                                <div class="grid grid-cols-3 gap-2 text-xs">
                                    <div class="bg-black bg-opacity-20 p-2 rounded text-center">
                                        <div class="text-white text-opacity-70">Ouv.</div>
                                        <div class="font-medium">5 599,30</div>
                                    </div>
                                    <div class="bg-black bg-opacity-20 p-2 rounded text-center">
                                        <div class="text-white text-opacity-70">Haut</div>
                                        <div class="font-medium">-4,80%</div>
                                    </div>
                                    <div class="bg-black bg-opacity-20 p-2 rounded text-center">
                                        <div class="text-white text-opacity-70">Bas</div>
                                        <div class="font-medium">-</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Indice 2: NASDAQ -->
                            <div class="bg-[#011E34] bg-opacity-70 p-5 rounded-lg mb-3">
                                <div class="flex justify-between mb-1">
                                    <div class="font-medium">NASDAQ</div>
                                    <div class="text-sm trend-up px-2 py-0.5 rounded-full bg-green-900 bg-opacity-20 flex items-center">
                                        <i class="fas fa-caret-up mr-1"></i> 0.00%
                                    </div>
                                </div>
                                <div class="text-2xl font-bold mb-1">17 648,45</div>
                                <div class="grid grid-cols-3 gap-2 text-xs">
                                    <div class="bg-black bg-opacity-20 p-2 rounded text-center">
                                        <div class="text-white text-opacity-70">Ouv.</div>
                                        <div class="font-medium">17 648,45</div>
                                    </div>
                                    <div class="bg-black bg-opacity-20 p-2 rounded text-center">
                                        <div class="text-white text-opacity-70">Haut</div>
                                        <div class="font-medium">-6,61%</div>
                                    </div>
                                    <div class="bg-black bg-opacity-20 p-2 rounded text-center">
                                        <div class="text-white text-opacity-70">Bas</div>
                                        <div class="font-medium">Voir</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Indice 3: CAC 40 -->
                            <div class="bg-[#011E34] bg-opacity-70 p-5 rounded-lg mb-3">
                                <div class="flex justify-between mb-1">
                                    <div class="font-medium">CAC 40</div>
                                    <div class="text-sm trend-down px-2 py-0.5 rounded-full bg-red-900 bg-opacity-20 flex items-center">
                                        <i class="fas fa-caret-down mr-1"></i> -0.25%
                                    </div>
                                </div>
                                <div class="text-2xl font-bold mb-1">7 969,10</div>
                            </div>
                            
                            <!-- Aperçu des marchés mondiaux -->
                            <div class="mt-4">
                                <h4 class="text-sm text-neon-green mb-2 flex items-center">
                                    <i class="fas fa-globe-europe mr-2"></i>
                                    Aperçu des marchés mondiaux
                                </h4>
                                <div class="grid grid-cols-2 gap-2 text-sm">
                                    <div class="p-2 bg-[#011E34] bg-opacity-70 rounded-lg text-center">
                                        <div>Europe</div>
                                        <div class="trend-down text-xs"><i class="fas fa-caret-down"></i></div>
                                    </div>
                                    <div class="p-2 bg-[#011E34] bg-opacity-70 rounded-lg text-center">
                                        <div>Amérique du Nord</div>
                                        <div class="trend-up text-xs"><i class="fas fa-caret-up"></i></div>
                                    </div>
                                    <div class="p-2 bg-[#011E34] bg-opacity-70 rounded-lg text-center">
                                        <div>Amérique Latine</div>
                                        <div class="trend-up text-xs"><i class="fas fa-caret-up"></i></div>
                                    </div>
                                    <div class="p-2 bg-[#011E34] bg-opacity-70 rounded-lg text-center">
                                        <div>Asie</div>
                                        <div class="trend-down text-xs"><i class="fas fa-caret-down"></i></div>
                                    </div>
                                </div>
                            </div>
                            
                            <a href="marches.html" class="btn btn-primary mt-4 w-full justify-center">
                                Consulter tous les marchés <i class="fas fa-arrow-right ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Actualités importantes -->
                <div class="glassmorphism" id="news-widget">
                    <div class="flex justify-between items-center p-4 border-b border-neon-green border-opacity-20 bg-[#011e34] bg-opacity-70">
                        <h3 class="text-neon-green font-semibold text-lg flex items-center">
                            <i class="fas fa-newspaper mr-2"></i>
                            Dernières actualités
                        </h3>
                    </div>
                    <div class="p-4">
                        <div class="space-y-3">
                            <!-- Actualité 1 -->
                            <a href="actualites.html#event-fed" class="p-3 bg-[#011E34] bg-opacity-70 rounded-lg border-l-2 border-neon-green hover:translate-x-1 transition-transform news-card block">
                                <h4 class="font-medium mb-2">La Fed annonce une réunion exceptionnelle sur les taux</h4>
                                <div class="flex justify-between text-xs text-white text-opacity-70">
                                    <span>Federal Reserve</span>
                                    <span>Il y a 1h</span>
                                </div>
                            </a>
                            
                            <!-- Actualité 2 -->
                            <a href="actualites.html#event-lvmh" class="p-3 bg-[#011E34] bg-opacity-70 rounded-lg border-l-2 border-neon-green hover:translate-x-1 transition-transform news-card block">
                                <h4 class="font-medium mb-2">LVMH dévoile des résultats trimestriels supérieurs aux attentes</h4>
                                <div class="flex justify-between text-xs text-white text-opacity-70">
                                    <span>LVMH</span>
                                    <span>Il y a 3h</span>
                                </div>
                            </a>
                            
                            <!-- Actualité 3 -->
                            <a href="actualites.html#event-btc" class="p-3 bg-[#011E34] bg-opacity-70 rounded-lg border-l-2 border-neon-green hover:translate-x-1 transition-transform news-card block">
                                <h4 class="font-medium mb-2">Bitcoin franchit un nouveau seuil à 75 000$</h4>
                                <div class="flex justify-between text-xs text-white text-opacity-70">
                                    <span>CoinDesk</span>
                                    <span>Il y a 2j</span>
                                </div>
                            </a>
                        </div>
                        
                        <a href="actualites.html" class="btn btn-secondary mt-4 inline-flex">
                            Voir toutes les actualités <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notification de résumé email -->
    <div class="email-summary-notification" id="emailNotification">
        <div class="flex items-center mb-3">
            <div class="email-notification-icon">
                <i class="fas fa-envelope"></i>
            </div>
            <div>
                <div class="font-medium">Résumé de portefeuille</div>
                <div class="text-xs text-white text-opacity-70">Prêt à être envoyé</div>
            </div>
        </div>
        <p class="text-sm text-white text-opacity-80 mb-2">
            Un résumé de votre portefeuille a été généré. Souhaitez-vous le prévisualiser?
        </p>
        <div class="email-notification-actions">
            <button class="email-notification-secondary" id="dismissNotification">Plus tard</button>
            <button class="email-notification-primary" id="viewEmailPreview">Voir résumé</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="dynamic-background.js"></script>
    <script src="marches-dashboard-connector.js"></script>
    <script src="dashboard-guide.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Créer le réseau de fond animé
            createNetworkBackground();
            
            // Mise à jour de la date et de l'heure
            updateDateTime();
            setInterval(updateDateTime, 1000);
            
            // Données des portefeuilles pour synchronisation avec les emails
            const portfolioData = {
                'aggressive': {
                    value: '32,415.25 €',
                    performance: '+7.2%',
                    monthlyPerformance: '+9.8%',
                    benchmark: '+3.1% (S&P 500)',
                    components: [
                        { name: 'NVIDIA Corporation', type: 'STOCK', allocation: '30%', performance: '+5.5%' },
                        { name: 'Tesla, Inc.', type: 'STOCK', allocation: '20%', performance: '+3.3%' },
                        { name: 'Bitcoin', type: 'CRYPTO', allocation: '15%', performance: '+18.7%' },
                        { name: 'Ethereum', type: 'CRYPTO', allocation: '10%', performance: '+9.5%' },
                        { name: 'ARK Innovation ETF', type: 'ETF', allocation: '15%', performance: '+2.2%' },
                        { name: 'Palantir Technologies', type: 'STOCK', allocation: '10%', performance: '+3.8%' }
                    ],
                    pieData: [80, 15, 25, 0]
                },
                'moderate': {
                    value: '26,842.15 €',
                    performance: '+3.2%',
                    monthlyPerformance: '+5.8%',
                    benchmark: '+2.3% (S&P 500)',
                    components: [
                        { name: 'NVIDIA Corporation', type: 'STOCK', allocation: '25%', performance: '+3.8%' },
                        { name: 'Microsoft Corporation', type: 'STOCK', allocation: '15%', performance: '+2.2%' },
                        { name: 'Amazon.com, Inc.', type: 'STOCK', allocation: '12%', performance: '+2.1%' },
                        { name: 'Tesla, Inc.', type: 'STOCK', allocation: '10%', performance: '-1.5%' },
                        { name: 'SPDR S&P 500 ETF', type: 'ETF', allocation: '20%', performance: '+0.7%' },
                        { name: 'Bitcoin', type: 'CRYPTO', allocation: '5%', performance: '+12.3%' },
                        { name: 'Obligations d\'État', type: 'BOND', allocation: '13%', performance: '+0.4%' }
                    ],
                    pieData: [62, 20, 15, 3]
                },
                'stable': {
                    value: '18,124.70 €',
                    performance: '+1.2%',
                    monthlyPerformance: '+3.1%',
                    benchmark: '+2.3% (S&P 500)',
                    components: [
                        { name: 'Vanguard Total Bond ETF', type: 'BOND', allocation: '25%', performance: '+0.4%' },
                        { name: 'Johnson & Johnson', type: 'STOCK', allocation: '12%', performance: '+0.8%' },
                        { name: 'Microsoft Corporation', type: 'STOCK', allocation: '10%', performance: '+2.2%' },
                        { name: 'SPDR S&P 500 ETF', type: 'ETF', allocation: '15%', performance: '+0.7%' },
                        { name: 'iShares 20+ Year Treasury', type: 'BOND', allocation: '23%', performance: '+0.2%' },
                        { name: 'Gold ETF', type: 'ETF', allocation: '5%', performance: '+1.1%' },
                        { name: 'Obligations d\'État', type: 'BOND', allocation: '10%', performance: '+0.3%' }
                    ],
                    pieData: [22, 20, 0, 58]
                }
            };
            
            // Initialisation avec le portefeuille agressif par défaut
            let currentPortfolio = 'aggressive';
            savePortfolioData(currentPortfolio);
            
            // Filtres de portefeuille
            document.querySelectorAll('.portfolio-filter').forEach(button => {
                button.addEventListener('click', function() {
                    // Retirer la classe active de tous les boutons
                    document.querySelectorAll('.portfolio-filter').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // Ajouter la classe active au bouton cliqué
                    this.classList.add('active');
                    
                    // Changer les données du portefeuille selon le filtre
                    currentPortfolio = this.getAttribute('data-portfolio');
                    updatePortfolioData(currentPortfolio);
                    savePortfolioData(currentPortfolio);
                });
            });
            
            // Bouton "J'ai compris" dans la bannière de bienvenue
            const understandBtn = document.querySelector('.understand-btn');
            const welcomeBanner = document.querySelector('.welcome-banner');
            
            if (understandBtn && welcomeBanner) {
                understandBtn.addEventListener('click', function() {
                    welcomeBanner.style.display = 'none';
                    localStorage.setItem('tradepulse_welcome_dismissed', 'true');
                });
                
                // Vérifier si l'utilisateur a déjà fermé la bannière
                if (localStorage.getItem('tradepulse_welcome_dismissed') === 'true') {
                    welcomeBanner.style.display = 'none';
                }
            }

            // Bouton de génération de résumé email
            document.getElementById('generateEmailBtn').addEventListener('click', function(e) {
                // Sauvegarder les données actuelles du portefeuille
                savePortfolioData(currentPortfolio);
                
                // Afficher la notification
                document.getElementById('emailNotification').classList.add('show');
            });

            // Bouton de rejet de la notification
            document.getElementById('dismissNotification').addEventListener('click', function() {
                document.getElementById('emailNotification').classList.remove('show');
            });

            // Bouton de prévisualisation d'email
            document.getElementById('viewEmailPreview').addEventListener('click', function() {
                window.location.href = 'email-preview.html';
            });
            
            // Fonctions
            function createNetworkBackground() {
                const networkBackground = document.getElementById('network-background');
                
                // Effacer le contenu existant
                networkBackground.innerHTML = '';
                
                // Calculer le nombre de nœuds en fonction de la taille de l'écran
                const numNodes = Math.min(Math.floor(window.innerWidth * window.innerHeight / 15000), 80);
                
                // Créer les nœuds
                const nodes = [];
                for (let i = 0; i < numNodes; i++) {
                    const node = document.createElement('div');
                    node.className = 'node';
                    
                    // Position aléatoire
                    const x = Math.random() * 100;
                    const y = Math.random() * 100;
                    
                    node.style.left = x + '%';
                    node.style.top = y + '%';
                    
                    // Certains nœuds pulsent
                    if (Math.random() < 0.3) {
                        node.classList.add('pulse');
                    }
                    
                    networkBackground.appendChild(node);
                    nodes.push({ element: node, x, y });
                }
                
                // Créer des connexions entre certains nœuds
                const maxConnections = Math.min(numNodes * 1.5, 80);
                for (let i = 0; i < maxConnections; i++) {
                    const nodeA = nodes[Math.floor(Math.random() * nodes.length)];
                    const nodeB = nodes[Math.floor(Math.random() * nodes.length)];
                    
                    if (nodeA !== nodeB) {
                        createConnection(nodeA, nodeB);
                    }
                }
                
                // Animer les nœuds périodiquement
                setInterval(() => {
                    nodes.forEach(node => {
                        if (Math.random() < 0.1) {
                            const newX = node.x + (Math.random() * 10 - 5);
                            const newY = node.y + (Math.random() * 10 - 5);
                            
                            node.x = Math.max(0, Math.min(100, newX));
                            node.y = Math.max(0, Math.min(100, newY));
                            
                            node.element.style.transition = 'all 5s ease';
                            node.element.style.left = node.x + '%';
                            node.element.style.top = node.y + '%';
                        }
                    });
                }, 3000);
            }
            
            function createConnection(nodeA, nodeB) {
                const connection = document.createElement('div');
                connection.className = 'connection';
                
                // Calculer l'angle et la distance entre les deux nœuds
                const dx = nodeB.x - nodeA.x;
                const dy = nodeB.y - nodeA.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                
                // Positionner et dimensionner la connexion
                connection.style.width = distance + '%';
                connection.style.left = nodeA.x + '%';
                connection.style.top = nodeA.y + '%';
                connection.style.transform = `rotate(${angle}deg)`;
                
                document.getElementById('network-background').appendChild(connection);
            }
            
            function updateDateTime() {
                const now = new Date();
                
                // Formater la date (JJ.MM.AAAA)
                const day = String(now.getDate()).padStart(2, '0');
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const year = now.getFullYear();
                const dateString = `${day}.${month}.${year}`;
                
                // Formater l'heure (HH:MM:SS)
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                const timeString = `${hours}:${minutes}:${seconds}`;
                
                // Mettre à jour les éléments
                document.getElementById('currentDate').textContent = dateString;
                document.getElementById('currentTime').textContent = timeString;
                document.getElementById('marketTime').textContent = timeString;
                
                // Formater la date pour le widget d'événements (11 Mars 2025)
                const options = { day: 'numeric', month: 'long', year: 'numeric' };
                document.getElementById('events-date').textContent = now.toLocaleDateString('fr-FR', options);
            }
            
            function updatePortfolioData(portfolioType) {
                // Obtenir les données du portefeuille sélectionné
                const data = portfolioData[portfolioType];
                
                // Mettre à jour le tableau des composants
                const tableBody = document.querySelector('#portfolio-widget tbody');
                tableBody.innerHTML = '';
                
                data.components.forEach(component => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-white border-opacity-5';
                    
                    const isPerfPositive = component.performance.startsWith('+');
                    const trendClass = isPerfPositive ? 'trend-up' : 'trend-down';
                    const trendIcon = isPerfPositive ? 'fa-caret-up' : 'fa-caret-down';
                    
                    row.innerHTML = `
                        <td class="py-3">${component.name}</td>
                        <td>
                            <span class="px-2 py-0.5 text-xs rounded ${getTypeClass(component.type)}">
                                ${component.type}
                            </span>
                        </td>
                        <td class="text-right font-medium">${component.allocation}</td>
                        <td class="text-right font-medium ${trendClass}">
                            <i class="fas ${trendIcon} mr-1"></i>${component.performance}
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Mettre à jour les valeurs de performance
                const perfTotal = document.querySelector('#portfolio-widget .flex-1:first-child .text-xl');
                const perfMonth = document.querySelector('#portfolio-widget .flex-1:last-child .text-xl');
                
                if (perfTotal) perfTotal.textContent = data.performance;
                if (perfMonth) perfMonth.textContent = data.monthlyPerformance;
            }
            
            // Fonction utilitaire pour obtenir la classe CSS en fonction du type d'actif
            function getTypeClass(type) {
                switch(type) {
                    case 'STOCK':
                        return 'bg-green-500 bg-opacity-20 text-green-400';
                    case 'ETF':
                        return 'bg-blue-500 bg-opacity-20 text-blue-400';
                    case 'CRYPTO':
                        return 'bg-yellow-500 bg-opacity-20 text-yellow-400';
                    case 'BOND':
                        return 'bg-purple-500 bg-opacity-20 text-purple-400';
                    default:
                        return 'bg-gray-500 bg-opacity-20 text-gray-400';
                }
            }
            
            // Fonction pour sauvegarder les données du portefeuille dans le localStorage
            function savePortfolioData(portfolioType) {
                const data = portfolioData[portfolioType];
                localStorage.setItem('portfolioType', portfolioType);
                localStorage.setItem('portfolioData', JSON.stringify(data));
            }
            
            // Redirection vers la page IA lors du clic sur le bouton de recherche
            document.querySelector('.search-button').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'recherche.html';
            });

            // Redimensionner le réseau lors du redimensionnement de la fenêtre
            window.addEventListener('resize', () => {
                createNetworkBackground();
            });
        });
    </script>
</body>
</html>